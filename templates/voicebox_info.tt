<html>
<!-- $Id: voicebox_info.tt,v 1.376 2024/05/07 15:47:46 gosha Exp $ -->
<head>
	<title>Virtual PBX - Extension info - Ac:[% USER_CREDS.ACCESS_CODE | html %], Ext: [% VBOX_PREF.EXT_NUMBER | html %]</title>
	
	[% IF USER_CREDS.CSS_HREF eq '' %]
	<link rel="stylesheet" type="text/css" href="/xvb/xvb.css" />
	[% ELSE %]
	<link rel="stylesheet" type="text/css" href="[% USER_CREDS.CSS_HREF %]" />
	[% END %]
	<script language="JavaScript" src="/xvb/js/xvb.js"></script>
	<script language="JavaScript" src="/xvb/js/recorder.js"></script>
	<script language="JavaScript">
		var e_list = [];
		e_list['hangup'] = [ null, null,'Exit from PBX',-2];
		e_list['back'] = [ null, null, 'GoTo previous ext',-1];
		e_list['repeat'] = [ null, null, 'Repeat current ext',0];
		[% FOREACH vb = VB_LIST %]
		e_list['[% vb.EXT_NUMBER | html %]'] = ['[% vb.ID %]','[% vb.DESCRIPTION | html %]','[% vb.NAME | html %]',[% vb.VB_IND %],[% vb.TYPE %]];
		[% END %]
		var e_menu = [];
		for ( var m_num in e_list ) {
			e_menu[2+e_list[m_num][3]] = m_num;
		}
		/* Recorder */
		URL = window.URL || window.webkitURL;
		var gumStream;
		var rec;
		var input;
		var AudioContext = window.AudioContext || window.webkitAudioContext;
		var audioContext;
		var server_url = "[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]";
	</script>
</head>

<body onLoad="XVBInit()">
	<center>

	<table width='100%'>
		<tr valign='top'>
			<td width='40%' align='left' nowrap='nowrap'>
			[% IF USER_CREDS.ROOT eq '0' %]
				<a href='?action=j_list&ext_id=[% VBOX_PREF.ID %]&ext_num=[% VBOX_PREF.EXT_NUMBER | html %]&uniq=[% USER_CREDS.UNIQ %]' title="Extension history"><span class='icon-history fs0'></span></a>
				<a href='?action=vb_add&new_ext=new-ext&uniq=[% USER_CREDS.UNIQ %]' title="Add extension"><span class='icon-plus-square-o fs0'></span></a>
				<a href='?action=vb_clone&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' title="Clone extension"><span class='icon-copy fs0'></span></a>
			[% END %]
				<a href='?action=msg_list&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' title="View files"><span class='icon-folder-open fs0'></span></a>
				<a href='?action=ext_stat&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' title="Activity"><span class='icon-stats-bars fs0'></span></a>
			[% IF EXTENDED_STAT %]
				<a href='?action=extended_stat&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' title="Extended statistics"><span class='icon-power fs0'></span></a>
			[% END %]
			</td>
			<td width='55%' align='left'>
				<h1>Extension # <b>[% VBOX_PREF.EXT_NUMBER | html %]</h1>
			</td>
			<td align='right'>
			[% IF USER_CREDS.ROOT eq '0' %]
				<a href='?action=vb_del&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('ru')" title="Delete extension"><span class='icon-bin-all fs2'></span></a>
			[% END %]
			</td>
		</tr>
		<tr>
			<td align='right' colspan='3'>
				<select onchange="LoadingOn(); ChangeExten(this.value,'[% USER_CREDS.UNIQ %]')">
					<script language="JavaScript">exten_dropdown('<option value="[% VBOX_PREF.ID | html %]">View extension</option>')</script>
				</select>
			</td>
		</tr>
	</table>

	<table width='100%'>
	<tr>
		<td width='53%' valign='top'>
		<table width='100%'>
			<form method="post" action="[% CGI_URL %]">
			<tr>
				<td>Type:</td>
				<td nowrap='nowrap'>
				[% IF USER_CREDS.ROOT eq '0' %]
					<input type='hidden' name='action' value='vb_change_type'>
					<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
					<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
					<select name="type" onchange="LoadingOn(); ChangeVbType(this.value,'[% VBOX_PREF.ID %]','[% USER_CREDS.UNIQ %]')">
					[% FOREACH vt = VB_TYPES %]
						[% IF VBOX_PREF.TYPE eq vt.ID %]
							<option value="[% vt.ID %]" selected>[% vt.DESCRIPTION | html %]</option>
						[% ELSIF vt.ID vb_allow '0' %]
							<option value="[% vt.ID %]">[% vt.DESCRIPTION | html %]</option>
						[% END %]
					[% END %]
					</select>
					&nbsp;&nbsp;
					<noscript><input type='submit' value='&nbsp;change&nbsp;'></noscript>
				[% ELSE %]
					[% VBOX_PREF.DESCRIPTION | html %]
				[% END %]

				[% IF VBOX_PREF.TYPE eq '1' %]
				<a href='#' class='help'><span class='icon-bubble2 fs0'></span><span class='help'>
				<h4>Playback hints:</h4>
				If 'Allow greeting rewind' checked, during a call, you can press:
				<ul>
					<li><b>4</b> - rew greeting ( -30 sec )</li>
					<li><b>6</b> - ff greeting ( +30 sec )</li>
					<li><b>5</b> - paused</li>
					<li><b>2</b>x - remember the position</li>
					<li><b>0</b>x - store the position</li>
				</ul>
				</span></a>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '3' %]
				<a href='#' class='help'><span class='icon-bubble2 fs0'></span><span class='help'>
				<h4>Find-Me hints:</h4>
				During a call, callee party can press:
						<ul>
							<li><b>*9</b> - For call transfer</li>
							<li><b>*8</b> - For call parking</li>
							<li><b>*4XXX</b> - Pitch control</li>
							<li><b>*3XX</b> - Background Music</li>
							<ul>
								<li><b>01</b> - Ball Game</li>
								<li><b>02</b> - Bowling</li>
								<li><b>03</b> - Camion poubelle</li>
								<li><b>04</b> - Cock-A-Doodle Doo!</li>
								<li><b>05</b> - Cris Inhumains</li>
								<li><b>06</b> - Unhappy Dog</li>
								<li><b>07</b> - Slamming Doors</li>
								<li><b>08</b> - Electric Drill</li>
								<li><b>09</b> - Drum (Played By A Child)</li>
								<li><b>10</b> - Orgasm (Exceptional)</li>
								<li><b>11</b> - Phone Ringing</li>
								<li><b>12</b> - Pigeons</li>
								<li><b>13</b> - Domestic Squabble</li>
								<li><b>14</b> - Footsteps (High Heels)</li>
								<li><b>15</b> - Train</li>
								<li><b>16</b> - Embouteillage</li>
								<li><b>17</b> - Faire ses gammes (Violon)</li>
								<li><b>18</b> - music</li>
								<li><b>19</b> - music</li>
								<li><b>20</b> - music</li>
								<li><b>21</b> - music</li>
								<li><b>22</b> - music</li>
							</ul>
							<li><b>*2XX</b> - Background Music (Loop)</li>
							<li><b>*1</b> - For start/pause record</li>
						</ul>
						<br />
						Caller party can press:
						<ul>
							<li><b>*0</b> - For call terminate</li>
						</ul>
				</span></a>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '5' %]
				<a href='#' class='help'><span class='icon-bubble2 fs0'></span><span class='help'>
				<h4>Schedule hints:</h4>
				When editing 'schedule data' fields can be used:
					<ul>Extra filters: CallerID Black list ( BL# )</ul>
					<ul>Extra filters: CallerID White list ( WL# )</ul>
					<ul>Extra filters: CallerID Regexp ( R#regexp)
						<li><b>[12-49]</b> -  any digit in the brackets (in this example, 1,2,3,4,9)</li>
						<li><b>!</b> - negative matches ( R#!712. - all except 712.)</li>
						<li><b>V1=123,V2=456</b> - compare 2 variables V1 need to == 123 and V2 == 456</li>
						<li><b>*</b> - any</li>
					</ul>
					<ul>Formats:
						<li><b>time</b> - hh:mm-hh:mm</li>
						<li><b>day of week</b> - day-day ( sun,mon,tue,wed,thu,fri,sat )</li>
						<li><b>day of month</b> - day-day ( 1..31 )</li>
						<li><b>month</b> - month-month ( jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec )</li>
						<li><b>year</b> - year-year ( 2009-2009 - for example )
						<li><b>*</b> - any</li>
					</ul>
				</span></a>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '13' %]
				<a href='#' class='help'><span class='icon-bubble2 fs0'></span><span class='help'>
				<h4>Queue hints:</h4>
				During a call, callee party can press:
						<ul>
							<li><b>*9</b> - For call transfer</li>
							<li><b>*8</b> - For call parking</li>
							<li><b>*4XXX</b> - Pitch control</li>
							<li><b>*3XX</b> - Background Music</li>
							<ul>
								<li><b>01</b> - Ball Game</li>
								<li><b>02</b> - Bowling</li>
								<li><b>03</b> - Camion poubelle</li>
								<li><b>04</b> - Cock-A-Doodle Doo!</li>
								<li><b>05</b> - Cris Inhumains</li>
								<li><b>06</b> - Unhappy Dog</li>
								<li><b>07</b> - Slamming Doors</li>
								<li><b>08</b> - Electric Drill</li>
								<li><b>09</b> - Drum (Played By A Child)</li>
								<li><b>10</b> - Orgasm (Exceptional)</li>
								<li><b>11</b> - Phone Ringing</li>
								<li><b>12</b> - Pigeons</li>
								<li><b>13</b> - Domestic Squabble</li>
								<li><b>14</b> - Footsteps (High Heels)</li>
								<li><b>15</b> - Train</li>
								<li><b>16</b> - Embouteillage</li>
								<li><b>17</b> - Faire ses gammes (Violon)</li>
								<li><b>18</b> - music</li>
								<li><b>19</b> - music</li>
								<li><b>20</b> - music</li>
								<li><b>21</b> - music</li>
								<li><b>22</b> - music</li>
							</ul>
							<li><b>*2XX</b> - Background Music (Loop)</li>
							<li><b>*1</b> - For start/pause record</li>
						</ul>
						<br />
						Caller party can press:
						<ul>
							<li><b>*0</b> - For call terminate</li>
						</ul>
				</span></a>
				[% END %]

				</td>
			</tr>
			</form>
			
			<form name='vb_opt' method="post" action="[% CGI_URL %]" onSubmit='return xmlhttpPost(this,0)'>
			<tr>
				<td>Number:</td>
				<td>
					[% IF VBOX_PREF.EXT_NUMBER eq '0' %]
					<input size='15' type='text' name='EXT_NUMBER' value='[% VBOX_PREF.EXT_NUMBER | html %]' readonly>
					[% ELSIF USER_CREDS.ROOT eq '0' %]
					<input size='15' type='text' name='EXT_NUMBER' value='[% VBOX_PREF.EXT_NUMBER | html %]'>
					[% ELSE %]
					<input size='15' type='text' name='EXT_NUMBER' value='[% VBOX_PREF.EXT_NUMBER | html %]' readonly>
					[% END %]
					<input type='hidden' name='action' value='vb_update'>
					<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
					<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
					&nbsp;&nbsp;id : [% VBOX_PREF.ID %]
				</td>
			</tr>
			<tr>
				<td>Next Extension: </td>
				<td nowrap='nowrap'>
					<input size='15' type='text' name='NEXTEXTENSION' value='[% VBOX_PREF.NEXTEXTENSION | html %]'>
					<script language="JavaScript">
						exten_dropdown2('NEXTEXTENSION','[% VBOX_PREF.NEXTEXTENSION | html %]','<option value="***">--------- raw editor ---------</option>');
						exten_icon( '[% VBOX_PREF.NEXTEXTENSION | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
					</script>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Pin code: </td>
				<td>
					<input size='12' type='text' name='PIN_CODE' value='[% VBOX_PREF.PIN_CODE | html %]'>
					#
					<input size='12' type='text' name='PIN_CODE2' value='[% VBOX_PREF.PIN_CODE2 | html %]'>
				</td>
			</tr>
			<tr>
				<td>Name: </td>
				<td>
					<input size='30' type='text' name='NAME' value='[% VBOX_PREF.NAME | html %]'>
				</td>
			</tr>
			[% IF USER_CREDS.TTS_GREETING ne '0' %]
			<tr>
				<td>Greeting: </td>
				<td>
					<textarea rows='[% VBOX_PREF.GREETING | textarea_rows %]' cols='30' name='GREETING'>[% VBOX_PREF.GREETING | html %]</textarea>
				</td>
			</tr>
			[% END %]
			<tr class='addon_info'>
				<td>Play greeting: </td>
				<td>
					<input size='2' type='text' name='GREET_REPEAT_CNT' value='[% VBOX_PREF.GREET_REPEAT_CNT %]'>
					&nbsp;times with&nbsp;
					<input size='2' type='text' name='GREET_REPEAT_DELAY' value='[% VBOX_PREF.GREET_REPEAT_DELAY %]'>
					&nbsp;sec delay
				</td>
			</tr>
			<tr>
				<td>Recipient notification: </td>
				<td>
					<input size='30' type='text' name='NOTIFYEMAIL' value='[% VBOX_PREF.NOTIFYEMAIL | html %]'>
				</td>
			</tr>
			[% IF VBOX_PREF.TYPE ne '1' %]
			<tr class='addon_info'>
			[% END %]
			[% IF VBOX_PREF.TYPE eq '1' %]
			<tr>
			[% END %]
				<td>Wait Extension: </td>
				<td>
						<div class="onoffswitch">
						<input name="WAITEXTENSION" type="checkbox" class="onoffswitch-checkbox" id="WAITEXTENSION-ch" 
						[% IF VBOX_PREF.WAITEXTENSION %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="WAITEXTENSION-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Hide extension: </td>
				<td>
						<div class="onoffswitch">
						<input name="HIDDEN" type="checkbox" class="onoffswitch-checkbox" id="HIDDEN-ch" 
						[% IF VBOX_PREF.HIDDEN %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="HIDDEN-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Protected with pin code: </td>
				<td>
						<div class="onoffswitch">
						<input name="PROTECT" type="checkbox" class="onoffswitch-checkbox" id="PROTECT-ch" 
						[% IF VBOX_PREF.PROTECT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="PROTECT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Direct access: </td>
				<td>
						<div class="onoffswitch">
						<input name="DIRECT" type="checkbox" class="onoffswitch-checkbox" id="DIRECT-ch" 
						[% IF VBOX_PREF.DIRECT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="DIRECT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Global extension: </td>
				<td>
						<div class="onoffswitch">
						<input name="GLOBAL" type="checkbox" class="onoffswitch-checkbox" id="GLOBAL-ch" 
						[% IF VBOX_PREF.GLOBAL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="GLOBAL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			[% IF VBOX_PREF.TYPE eq '1' %]
			<tr>
				<td>Allow greeting rewind: </td>
				<td>
						<div class="onoffswitch">
						<input name="GREETING_CONTROL" type="checkbox" class="onoffswitch-checkbox" id="GREETING_CONTROL-ch" 
						[% IF VBOX_PREF.GREETING_CONTROL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="GREETING_CONTROL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			[% END %]
			[% IF VBOX_PREF.TYPE ne '1' %]
				<input name="GREETING_CONTROL" type="hidden" value="[% VBOX_PREF.GREETING_CONTROL %]">
			[% END %]

			<tr class='addon_info'>
				<td>
					CID filters:&nbsp;&nbsp;(
					<a href='?action=cid_list&id=[% VBOX_PREF.ID %]&cid_list_type=2&cid_type=1&uniq=[% USER_CREDS.UNIQ %]' title='edit CID white list'><span class='icon-libreoffice fs1 white'></span></a> /
					<a href='?action=cid_list&id=[% VBOX_PREF.ID %]&cid_list_type=1&cid_type=1&uniq=[% USER_CREDS.UNIQ %]' title='edit CID black list'><span class='icon-libreoffice fs1 black'></span></a> )
				</td>
				<td>
					<select name="CID">
					[% FOREACH ct = CID_TYPES %]
						[% IF VBOX_PREF.CID eq ct.ID %]
						<option value="[% ct.ID %]" selected>[% ct.DESCRIPTION | html %]</option>
						[% ELSE %]
						<option value="[% ct.ID %]">[% ct.DESCRIPTION | html %]</option>
						[% END %]
					[% END %]
					</select>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>CID action:</td>
				<td>
					<select name="CID_ACTION">
					[% FOREACH ca = CID_ACTIONS %]
						[% IF VBOX_PREF.CID_ACTION eq ca.ID %]
						<option value="[% ca.ID %]" selected>[% ca.DESCRIPTION | html %]</option>
						[% ELSE %]
						<option value="[% ca.ID %]">[% ca.DESCRIPTION | html %]</option>
						[% END %]
					[% END %]
					</select>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Prompt language:</td>
				<td>
					<select name='LANG_ID'>
						[% FOREACH lang = LANG %]
							[% IF VBOX_PREF.LANG_ID eq lang.ID %]
								<option value="[% lang.ID | html %]" selected>[% lang.DESCRIPTION | html %]</option>
							[% ELSE %]
								<option value="[% lang.ID | html %]">[% lang.DESCRIPTION | html %]</option>
							[% END %]
						[% END %]
					</select>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Volume control RX/TX:</td>
				<td nowrap='nowrap'>
					<input size='4' name="VOLUME_RX" value="[% VBOX_PREF.VOLUME_RX | html %]" type="text">
					&nbsp;/&nbsp;
					<input size='4' name="VOLUME_TX" value="[% VBOX_PREF.VOLUME_TX | html %]" type="text">
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Pitch control RX/TX:</td>
				<td>
					<input size='4' name="PITCH_RX" value="[% VBOX_PREF.PITCH_RX | html %]" type="text">
					&nbsp;/&nbsp;
					<input size='4' name="PITCH_TX" value="[% VBOX_PREF.PITCH_TX | html %]" type="text">
				</td>
			</tr>
			<tr class='addon_info'><td colspan='2'>&nbsp;</td></tr>
			
			[% IF VBOX_PREF.TYPE eq '1' %]
			<tr class='addon_info'>
				<td>Time tags: </td>
				<td>
					<textarea rows='[% VBOX_PREF.GREETING_TAGS | textarea_rows %]' cols='30' name='GREETING_TAGS'>[% VBOX_PREF.GREETING_TAGS | html %]</textarea>
				</td>
			</tr>
			[% END %]

			[% IF VBOX_PREF.TYPE eq '2' %]
			<tr class='addon_info'>
				<td>Max message duaration: </td>
				<td>
					<input size='8' name="MAX_MSG_DURATION" value="[% VBOX_PREF.MAX_MSG_DURATION | html %]" type="text">
					( in sec, -1 - for unlimit  )
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Min message duaration: </td>
				<td>
					<input size='8' name="MIN_MSG_DURATION" value="[% VBOX_PREF.MIN_MSG_DURATION | html %]" type="text">
					( in sec, -1 - for unlimit  )
				</td>
			</tr>
			<tr>
				<td>Send new message notify: </td>
				<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Send attachment: </td>
				<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Keep message on the server: </td>
				<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Record without confirmation: </td>
				<td>
						<div class="onoffswitch">
						<input name="WO_CONFIRM" type="checkbox" class="onoffswitch-checkbox" id="WO_CONFIRM-ch" 
						[% IF VBOX_PREF.WO_CONFIRM %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="WO_CONFIRM-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Record session: </td>
				<td>
						<div class="onoffswitch">
						<input name="REC_SESSION" type="checkbox" class="onoffswitch-checkbox" id="REC_SESSION-ch" 
						[% IF VBOX_PREF.REC_SESSION %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="REC_SESSION-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
			</tr>
			[% END %]
			
			[% IF VBOX_PREF.TYPE eq '3' %]
			<tr>
				<td>Find-Me list: </td>
				<td>
					<textarea rows='[% VBOX_PREF.CALL_NUMBER | textarea_rows %]' cols='30' name='CALL_NUMBER'>[% VBOX_PREF.CALL_NUMBER | html %]</textarea>
				</td>
			</tr>
			<tr class='addon_info'>
			<td>Goto if call fail: </td>
				<td nowrap='nowrap'>
					<input size='15' type='text' name='GOTO_IF_FAIL' value='[% VBOX_PREF.GOTO_IF_FAIL | html %]'>
					<script language="JavaScript">
						exten_dropdown2( 'GOTO_IF_FAIL','[% VBOX_PREF.GOTO_IF_FAIL | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
						exten_icon( '[% VBOX_PREF.GOTO_IF_FAIL | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
					</script>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Seamless transferring list: </td>
				<td>
					<textarea rows='[% VBOX_PREF.FMC | textarea_rows %]' cols='30' name='FMC'>[% VBOX_PREF.FMC | html %]</textarea>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>GoTo if call status: </td>
				<td>
					<textarea rows='[% VBOX_PREF.GOTO_IF_CALL_STATUS | textarea_rows %]' cols='30' name='GOTO_IF_CALL_STATUS'>[% VBOX_PREF.GOTO_IF_CALL_STATUS | html %]</textarea>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Music on hold:</td>
				<td>
					<select name='MOH_ID'>
						[% FOREACH moh = MOH %]
							[% IF VBOX_PREF.MOH_ID eq moh.ID %]
								<option value="[% moh.ID | html %]" selected>[% moh.DESCRIPTION | html %]</option>
							[% ELSE %]
								<option value="[% moh.ID | html %]">[% moh.DESCRIPTION | html %]</option>
							[% END %]
						[% END %]
					</select>
				</td>
			</tr>
			<tr class='addon_info'>
				<td>Ring strategy: </td>
				<td>
					<select name="CALL_TYPE">
					[% FOREACH ct = CALL_TYPES %]
						[% IF VBOX_PREF.CALL_TYPE eq ct.ID %]
							<option value="[% ct.ID %]" selected>[% ct.DESCRIPTION | html %]</option>
						[% ELSE %]
							<option value="[% ct.ID %]">[% ct.DESCRIPTION | html %]</option>
						[% END %]
					[% END %]
					</select> 
				</td>
			</tr>
				<tr class='addon_info'>
					<td>Send DTMF (0-9#*w): </td>
					<td>
						<input size='30' type='text' name='SEND_DIGITS' value='[% VBOX_PREF.SEND_DIGITS | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Call transfer prefix: </td>
					<td>
						<input size='30' type='text' name='TRANSFER_PREF' value='[% VBOX_PREF.TRANSFER_PREF | html %]'>
					</td>
				</tr>
				[% IF USER_CREDS.VBL_27 ne '0' %]
				<tr class='addon_info'>
					<td>Parking extension: </td>
					<td>
						<input size='30' type='text' name='PARKING_EXT' value='[% VBOX_PREF.PARKING_EXT | html %]'>
					</td>
				</tr>
				[% END %]
				<tr class='addon_info'>
					<td>Confirm calls: </td>
					<td>
						<div class="onoffswitch">
						<input name="CONFIRM_CALL" type="checkbox" class="onoffswitch-checkbox" id="CONFIRM_CALL-ch" 
						[% IF VBOX_PREF.CONFIRM_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="CONFIRM_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Say callerid: </td>
					<td>
						<div class="onoffswitch">
						<input name="SAY_CALLERID" type="checkbox" class="onoffswitch-checkbox" id="SAY_CALLERID-ch" 
						[% IF VBOX_PREF.SAY_CALLERID %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SAY_CALLERID-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Screening mode: </td>
					<td>
						<div class="onoffswitch">
						<input name="SCREENING_MODE" type="checkbox" class="onoffswitch-checkbox" id="SCREENING_MODE-ch" 
						[% IF VBOX_PREF.SCREENING_MODE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SCREENING_MODE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Start voicemail if call fail: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_IF_FAIL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_IF_FAIL-ch" 
						[% IF VBOX_PREF.RECORD_IF_FAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_IF_FAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Record calls: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_CALL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_CALL-ch" 
						[% IF VBOX_PREF.RECORD_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send attachment: </td>
					<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keep message on the server: </td>
					<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Miss call alert: </td>
					<td>
						<div class="onoffswitch">
						<input name="MISS_CALL_ALERT" type="checkbox" class="onoffswitch-checkbox" id="MISS_CALL_ALERT-ch" 
						[% IF VBOX_PREF.MISS_CALL_ALERT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="MISS_CALL_ALERT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Send new message notify: </td>
					<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Ring timeout (sec): </td>
					<td>
						<input size='4' type='text' name='RING_TIMEOUT' value='[% VBOX_PREF.RING_TIMEOUT | html %]'>
						( 1 ring equals ~ 4 seconds )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>RetryDial interval (sec): </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_INTERVAL' value='[% VBOX_PREF.RETRYDIAL_INTERVAL | html %]'>
						( 0-120 )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>RetryDial loops: </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_LOOPS' value='[% VBOX_PREF.RETRYDIAL_LOOPS | html %]'>
						( -1 - for unlimit )
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '4' %]
				<tr>
					<td>Search by : </td>
					<td>
						<select name="USE_FIRSTNAME">
							<option value="1"
							[% IF VBOX_PREF.USE_FIRSTNAME == '1' %]
								selected
							[% END %]
							>First name</option>
							<option value="0"
							[% IF VBOX_PREF.USE_FIRSTNAME == '0' %]
								selected
							[% END %]
							>Last name</option>
							<option value="2"
							[% IF VBOX_PREF.USE_FIRSTNAME == '2' %]
								selected
							[% END %]
							>First or Last name</option>
				
							[% IF USER_CREDS.ASR_ENGINE ne '' %]
							<option value="3"
							[% IF VBOX_PREF.USE_FIRSTNAME == '3' %]
								selected
							[% END %]
							>First and Last name</option>
							[% END %]
						</select>
					</td>
				</tr>
				[% IF USER_CREDS.TTS_GREETING ne '0' %]
				<tr class='addon_info'>
					<td>Use TTS: </td>
					<td>
						<div class="onoffswitch">
						<input name="USE_TTS_NAME" type="checkbox" class="onoffswitch-checkbox" id="USE_TTS_NAME-ch" 
						[% IF VBOX_PREF.USE_TTS_NAME %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="USE_TTS_NAME-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]
				[% IF USER_CREDS.ASR_ENGINE ne '' %]
				<tr class='addon_info'>
					<td>Use Voice Input: </td>
					<td>
						<div class="onoffswitch">
						<input name="USE_VOICE_SEARCH" type="checkbox" class="onoffswitch-checkbox" id="USE_VOICE_SEARCH-ch" 
						[% IF VBOX_PREF.USE_VOICE_SEARCH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="USE_VOICE_SEARCH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]
				<tr class='addon_info'>
					<td>Number of characters: </td>
					<td>
						<input size='2' type='text' name='KEY_LEN' value='[% VBOX_PREF.KEY_LEN | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Help Extension: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='DIR_HELPEXT' value='[% VBOX_PREF.DIR_HELPEXT | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'DIR_HELPEXT','[% VBOX_PREF.DIR_HELPEXT | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.DIR_HELPEXT | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keyboard layout: </td>
					<td>
					<select name="DIR_LANG">
					[% FOREACH llang = DIR_LANG %]
						[% IF VBOX_PREF.DIR_LANG eq llang.ID %]
						<option value="[% llang.ID %]" selected>[% llang.DESCRIPTION | html %]</option>
						[% ELSE %]
						<option value="[% llang.ID %]">[% llang.DESCRIPTION | html %]</option>
						[% END %]
					[% END %]
					</select>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '5' %]
				<tr class='addon_info'>
					<td>Schedule Time Zone</td>
					<td>
						<input size='20' type='text' name='TZ_NAME' value='[% VBOX_PREF.TZ_NAME | html %]'>
						<script lang='JavaScript'>tz_dropdown('[% VBOX_PREF.TZ_NAME %]', 'Default')</script>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '6' %]
				<tr>
					<td>URL: </td>
					<td>
						<input size='30' type='text' name='TTS_URL' value='[% VBOX_PREF.TTS_URL | html %]'>
					</td>
				</tr>
				<tr>
					<td>Request Method: </td>
					<td>
						<select name="TTS_METHOD">
							<option selected value="[% VBOX_PREF.TTS_METHOD %]">[% VBOX_PREF.TTS_METHOD %]</option>
							<option value="GET">GET</option>
							<option value="POST">POST</option>
							<option value="HEAD">HEAD</option>
							<option value="PUT">PUT</option>
							<option value="DELETE">DELETE</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Post/Put params: </td>
					<td>
						<textarea rows='[% VBOX_PREF.TTS_POST_PARAMS | textarea_rows %]' cols='30' name='TTS_POST_PARAMS'>[% VBOX_PREF.TTS_POST_PARAMS | html %]</textarea>
					</td>
				</tr>
				<tr>
					<td><a href='#' class='info'>Content-type of params: <span>
						application/x-www-form-urlencoded as default for POST / PUT requests
						</span></a></td>
					<td>
						<select name="TTS_C_TYPE">
							<option selected value="[% VBOX_PREF.TTS_C_TYPE | html %]">[% VBOX_PREF.TTS_C_TYPE | html %]</option>
							<option value="application/x-www-form-urlencoded">application/x-www-form-urlencoded</option>
							<option value="application/json">application/json</option>
							<option value="application/xml">application/xml</option>
							<option value=""> </option>
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Headers: </td>
					<td>
						<textarea rows='[% VBOX_PREF.TTS_REQ_HEADERS | textarea_rows %]' cols='30' name='TTS_REQ_HEADERS'>[% VBOX_PREF.TTS_REQ_HEADERS | html %]</textarea>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>User Agent: </td>
					<td>
						<input size='30' type='text' name='TTS_REQ_UA' value='[% VBOX_PREF.TTS_REQ_UA | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Goto if request fail: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='GOTO_IF_FAIL' value='[% VBOX_PREF.GOTO_IF_FAIL | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'GOTO_IF_FAIL','[% VBOX_PREF.GOTO_IF_FAIL | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.GOTO_IF_FAIL | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr>
					<td>Repeat answer: </td>
					<td>
						<input size='4' type='text' name='TTS_REPEAT_CNT' value='[% VBOX_PREF.TTS_REPEAT_CNT | html %]'>&nbsp;times
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Read user params: </td>
					<td>
						<div class="onoffswitch">
						<input name="NEED_PARAMS" type="checkbox" class="onoffswitch-checkbox" id="NEED_PARAMS-ch" 
						[% IF VBOX_PREF.NEED_PARAMS %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="NEED_PARAMS-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>No wait response: </td>
					<td>
						<div class="onoffswitch">
						<input name="NO_WAIT" type="checkbox" class="onoffswitch-checkbox" id="NO_WAIT-ch" 
						[% IF VBOX_PREF.NO_WAIT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="NO_WAIT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Music on hold:</td>
					<td>
						<select name='MOH_ID'>
							[% FOREACH moh = MOH %]
								[% IF VBOX_PREF.MOH_ID eq moh.ID %]
									<option value="[% moh.ID | html %]" selected>[% moh.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% moh.ID | html %]">[% moh.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '7' %]
				[% IF USER_CREDS.ALLOW_ICECAST %]
				<tr class='addon_info'>
					<td>HTTP-Broadcast: </td>
					<td>
						<div class="onoffswitch">
						<input name="SHARE_VIA_ICECAST" type="checkbox" class="onoffswitch-checkbox" id="SHARE_VIA_ICECAST-ch" 
						[% IF VBOX_PREF.SHARE_VIA_ICECAST %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SHARE_VIA_ICECAST-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]
				<tr>
					<td>Record conference: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_CALL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_CALL-ch" 
						[% IF VBOX_PREF.RECORD_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '8' %]
				<tr>
					<td>Fax Header: </td>
					<td>
						<textarea rows='[% VBOX_PREF.HEADERINFO | textarea_rows %]' cols='30' name='HEADERINFO'>[% VBOX_PREF.HEADERINFO | html %]</textarea>
					</td>
				</tr>
				<tr>
					<td>Send new message notify: </td>
					<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send attachment: </td>
					<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keep message on the server: </td>
					<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '9' %]
				<tr>
					<td>Input pattern:</td>
					<td>
						<select name='DTMF_PATTERN_ID'>
							[% FOREACH dtmf = DTMF_PATTERN %]
								[% IF VBOX_PREF.DTMF_PATTERN_ID eq dtmf.ID %]
									<option value="[% dtmf.ID | html %]" selected>[% dtmf.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% dtmf.ID | html %]">[% dtmf.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Max digits: </td>
					<td>
						<input size='10' name="MAX_DIGITS" value="[% VBOX_PREF.MAX_DIGITS | html %]" type="text">
						( -1 for unlimit )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Variable name: </td>
					<td>
						<input size='10' name="VAR_NAME" value="[% VBOX_PREF.VAR_NAME | html %]" type="text">
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Other vars: </td>
					<td>
						<textarea rows='[% VBOX_PREF.OTHER_VARS | textarea_rows %]' cols='30' name='OTHER_VARS'>[% VBOX_PREF.OTHER_VARS | html %]</textarea>
					</td>
				</tr>
				<tr>
					<td>Send new message notify: </td>
					<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send attachment: </td>
					<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keep message on the server: </td>
					<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Format input var: </td>
					<td>
						<div class="onoffswitch">
						<input name="NEED_FORMATED" type="checkbox" class="onoffswitch-checkbox" id="NEED_FORMATED-ch" 
						[% IF VBOX_PREF.NEED_FORMATED %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="NEED_FORMATED-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
				</td>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '10' %]
				<tr>
					<td>Allow digits: </td>
					<td>
						<input size='10' name="ALLOW_DIGITS" value="[% VBOX_PREF.ALLOW_DIGITS | html %]" type="text">
						( comma separated )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Auto input:</td>
					<td>
						<input size='10' name="VAR_NAME" value="[% VBOX_PREF.VAR_NAME | html %]" type="text">
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Uniq CIDs: </td>
					<td>
						<div class="onoffswitch">
						<input name="UNIQ_CIDS" type="checkbox" class="onoffswitch-checkbox" id="UNIQ_CIDS-ch" 
						[% IF VBOX_PREF.UNIQ_CIDS %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="UNIQ_CIDS-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '11' %]
				<tr class='addon_info'>
					<td>Music on hold:</td>
					<td>
						<select name='MOH_ID'>
							[% FOREACH moh = MOH %]
								[% IF VBOX_PREF.MOH_ID eq moh.ID %]
									<option value="[% moh.ID | html %]" selected>[% moh.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% moh.ID | html %]">[% moh.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Phone pattern: </td>
					<td>
						<input size='30' name="PHONE_PATTERN" value="[% VBOX_PREF.PHONE_PATTERN | html %]" type="text">
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Max digits: </td>
					<td>
						<input size='10' name="MAX_DIGITS" value="[% VBOX_PREF.MAX_DIGITS | html %]" type="text">
						( -1 for unlimit )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Static phone: </td>
					<td>
						<input size='30' name="PHONE_NUMBER" value="[% VBOX_PREF.PHONE_NUMBER | html %]" type="text">
					</td>
				</tr>
				<tr class='addon_info'>
					<td>CallerID Number: </td>
					<td>
						<input size='30' type='text' name='CALLERID_NUM' value='[% VBOX_PREF.CALLERID_NUM | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Ring timeout (sec): </td>
					<td>
						<input size='4' type='text' name='RING_TIMEOUT' value='[% VBOX_PREF.RING_TIMEOUT | html %]'>
						( 1 ring equals ~ 4 seconds )
					</td>
				</tr>
				<td>Goto if call fail: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='GOTO_IF_FAIL' value='[% VBOX_PREF.GOTO_IF_FAIL | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'GOTO_IF_FAIL','[% VBOX_PREF.GOTO_IF_FAIL | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.GOTO_IF_FAIL | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr>
					<td>Send new message notify: </td>
					<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% IF USER_CREDS.ALLOW_PHONES %]
				<tr class='addon_info'>
					<td>Only local phones: </td>
					<td>
						<div class="onoffswitch">
						<input name="PHONE_MODE" type="checkbox" class="onoffswitch-checkbox" id="PHONE_MODE-ch" 
						[% IF VBOX_PREF.PHONE_MODE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="PHONE_MODE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]
				<tr class='addon_info'>
					<td>Record calls: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_CALL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_CALL-ch" 
						[% IF VBOX_PREF.RECORD_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send attachment: </td>
					<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keep message on the server: </td>
					<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '12' %]
				<tr>
					<td>Podcast url (rss): </td>
					<td>
						<input size='30' name="PODCAST_URL" value="[% VBOX_PREF.PODCAST_URL | html %]" type="text">
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Play podcast announcement: </td>
					<td>
						<div class="onoffswitch">
						<input name="PODCAST_ANNOUNCEMENT" type="checkbox" class="onoffswitch-checkbox" id="PODCAST_ANNOUNCEMENT-ch" 
						[% IF VBOX_PREF.PODCAST_ANNOUNCEMENT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="PODCAST_ANNOUNCEMENT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Play only one latest podcast: </td>
					<td>
						<div class="onoffswitch">
						<input name="ONLY_LATEST" type="checkbox" class="onoffswitch-checkbox" id="ONLY_LATEST-ch" 
						[% IF VBOX_PREF.ONLY_LATEST %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="ONLY_LATEST-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '13' %]
				<tr>
					<td>Agents list: </td>
					<td>
						<textarea rows='[% VBOX_PREF.CALL_NUMBER | textarea_rows %]' cols='30' name='CALL_NUMBER'>[% VBOX_PREF.CALL_NUMBER | html %]</textarea>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Music on hold:</td>
					<td>
						<select name='MOH_ID'>
							[% FOREACH moh = MOH %]
								[% IF VBOX_PREF.MOH_ID eq moh.ID %]
									<option value="[% moh.ID | html %]" selected>[% moh.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% moh.ID | html %]">[% moh.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Ring strategy: </td>
					<td>
						<select name="CALL_TYPE">
						[% FOREACH ct = CALL_TYPES %]
							[% IF VBOX_PREF.CALL_TYPE eq ct.ID %]
								<option value="[% ct.ID %]" selected>[% ct.DESCRIPTION | html %]</option>
							[% ELSE %]
								<option value="[% ct.ID %]">[% ct.DESCRIPTION | html %]</option>
							[% END %]
						[% END %]
						</select> 
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Ring timeout (sec): </td>
					<td>
						<input size='4' type='text' name='RING_TIMEOUT' value='[% VBOX_PREF.RING_TIMEOUT | html %]'>
						( 1 ring equals ~ 4 seconds )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Queue timeout (sec): </td>
					<td>
						<input size='4' type='text' name='Q_TIMEOUT' value='[% VBOX_PREF.Q_TIMEOUT | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Queue max waiting calls: </td>
					<td>
						<input size='4' type='text' name='Q_MAX_W_CALLS' value='[% VBOX_PREF.Q_MAX_W_CALLS | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Wrap up time (sec): </td>
					<td>
						<input size='4' type='text' name='WRAPUPTIME' value='[% VBOX_PREF.WRAPUPTIME | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Queue announce frequency (sec): </td>
					<td>
						<input size='4' type='text' name='ANNOUNCE_FREQUENCY' value='[% VBOX_PREF.ANNOUNCE_FREQUENCY | html %]'>
						( -1 - say once )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Announce Queue holdtime: </td>
					<td>
						<select name="ANNOUNCE_HOLDTIME">
						[% IF VBOX_PREF.ANNOUNCE_HOLDTIME eq '2' %]
							<option value="2" selected>the average for last hour</option>
							<option value="0">none</option>
							<option value="1">the average for all time</option>
						[% ELSIF VBOX_PREF.ANNOUNCE_HOLDTIME eq '1' %]
							<option value="1" selected>the average for all time</option>
							<option value="0">none</option>
							<option value="2">the average for last hour</option>
						[% ELSE %]
							<option value="0" selected>none</option>
							<option value="1">the average for all time</option>
							<option value="2">the average for last hour</option>
						[% END %]
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Announce Queue position: </td>
					<td>
						<div class="onoffswitch">
						<input name="ANNOUNCE_POSITION" type="checkbox" class="onoffswitch-checkbox" id="ANNOUNCE_POSITION-ch" 
						[% IF VBOX_PREF.ANNOUNCE_POSITION %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="ANNOUNCE_POSITION-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Send new message notify: </td>
					<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Miss call alert: </td>
					<td>
						<div class="onoffswitch">
						<input name="MISS_CALL_ALERT" type="checkbox" class="onoffswitch-checkbox" id="MISS_CALL_ALERT-ch" 
						[% IF VBOX_PREF.MISS_CALL_ALERT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="MISS_CALL_ALERT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Record calls: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_CALL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_CALL-ch" 
						[% IF VBOX_PREF.RECORD_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Start record from ringing:</td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_RINGS" type="checkbox" class="onoffswitch-checkbox" id="RECORD_RINGS-ch" 
						[% IF VBOX_PREF.RECORD_RINGS %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_RINGS-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send attachment: </td>
					<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keep message on the server: </td>
					<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Clean queue: </td>
					<td>
						<div class="onoffswitch">
						<input name="WAIT_BUSY_ONLY" type="checkbox" class="onoffswitch-checkbox" id="WAIT_BUSY_ONLY-ch" 
						[% IF VBOX_PREF.WAIT_BUSY_ONLY %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="WAIT_BUSY_ONLY-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% IF DEVICE_STATE %]
				<tr class='addon_info'>
					<td>Check phone state:<td>
						<div class="onoffswitch">
						<input name="DEVICE_STATE" type="checkbox" class="onoffswitch-checkbox" id="DEVICE_STATE-ch" 
						[% IF VBOX_PREF.DEVICE_STATE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="DEVICE_STATE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]
				<tr class='addon_info'>
					<td>Join empty: </td>
					<td>
						<div class="onoffswitch">
						<input name="JOINEMPTY" type="checkbox" class="onoffswitch-checkbox" id="JOINEMPTY-ch" 
						[% IF VBOX_PREF.JOINEMPTY %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="JOINEMPTY-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Remember the agent: </td>
					<td>
						<div class="onoffswitch">
						<input name="REMEMBER_AGENT" type="checkbox" class="onoffswitch-checkbox" id="REMEMBER_AGENT-ch" 
						[% IF VBOX_PREF.REMEMBER_AGENT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="REMEMBER_AGENT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Wait notes:</td>
					<td>
						<div class="onoffswitch">
						<input name="WAIT_NOTES" type="checkbox" class="onoffswitch-checkbox" id="WAIT_NOTES-ch" 
						[% IF VBOX_PREF.WAIT_NOTES %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="WAIT_NOTES-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Goto if queue fail: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='GOTO_IF_FAIL' value='[% VBOX_PREF.GOTO_IF_FAIL | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'GOTO_IF_FAIL','[% VBOX_PREF.GOTO_IF_FAIL | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.GOTO_IF_FAIL | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Call transfer prefix: </td>
					<td>
						<input size='30' type='text' name='TRANSFER_PREF' value='[% VBOX_PREF.TRANSFER_PREF | html %]'>
					</td>
				</tr>
				[% IF USER_CREDS.VBL_27 ne '0' %]
				<tr class='addon_info'>
					<td>Parking extension: </td>
					<td>
						<input size='30' type='text' name='PARKING_EXT' value='[% VBOX_PREF.PARKING_EXT | html %]'>
					</td>
				</tr>
				[% END %]
				<tr class='addon_info'>
					<td>CallerID Name: </td>
					<td>
						<input size='30' type='text' name='CALLERID_NAME' value='[% VBOX_PREF.CALLERID_NAME | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>CallerID Number: </td>
					<td>
						<input size='30' type='text' name='CALLERID_NUM' value='[% VBOX_PREF.CALLERID_NUM | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Phone URL
						<select name='crm' onchange='javascript:document.vb_opt.Q_URL.value=this.value'>
							<option value='[% VBOX_PREF.Q_URL | html %]' selected>Web URL</option>
							<option value='http://www.anywho.com/qry/wp_rl?npa=% VAR:CID:1:3 %&telephone=% VAR:CID:4:10 %'>AnyWho</option>
							<option value='http://www.google.com/search?rls=en&q=phonebook:% VAR:CID:1:10 %'>Google</option>
							<option value='http://www.phonenumber.com/10004/search/ReversePhone?phone=% VAR:CID:1:10 %'>Phone Number</option>
							<option value='http://www.switchboard.com/bin/cgirlookup.dll?SR=&MEM=1&TYPE=BOTH&PH=% VAR:CID:1:10 %&search.x=0&search.y=0&search=Search'>Switch board</option>
							<option value='http://www.whitepages.com/search/ReversePhone?full_phone=% VAR:CID:1:10 %&localtime=survey'>White Pages</option>
							<option value='https://REPLACEME/search/SearchResults?searchType=1&sen=003&setLast=1&sbstr=% VAR:CID:1:10 %'>Salesforce.com</option>
							<option value='http://${ YOUR HOST ADDRESS }:8080/vtigercrm/index.php?phone_number=% VAR:CID:1:10 %'>vtiger CRM</option>
							<option value='http://${ YOUR HOST ADDRESS }/index.php?query_string=% VAR:CID %&module=Home&advanced=true&action=UnifiedSearch&search_form=false&search_mod_Accounts=true&search_mod_Contacts=true&search_mod_Leads=true&search_mod_Project=true'>SugarCRM</option>
							<option value='https://${ YOUR_HOST }.amocrm.ru/private/acceptors/asterisk_new/?number=% VAR:CID %&USER_LOGIN=%{ YOUR_LOGIN }&USER_HASH=%{ YOUR_HASH_KEY }'>AmoCRM</option>
						</select> :
					</td>
					<td>
						<input size='30' type='text' name='Q_URL' value='[% VBOX_PREF.Q_URL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Entry URL:</td>
					<td>
						<input size='30' type='text' name='Q_INIT_URL' value='[% VBOX_PREF.Q_INIT_URL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>On Call Answered URL:</td>
					<td>
						<input size='30' type='text' name='Q_ANSWERED_URL' value='[% VBOX_PREF.Q_ANSWERED_URL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Miss call URL</td>
					<td>
						<input size='30' type='text' name='MISS_CALL_URL' value='[% VBOX_PREF.MISS_CALL_URL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Answered call URL</td>
					<td>
						<input size='30' type='text' name='ANSW_CALL_URL' value='[% VBOX_PREF.ANSW_CALL_URL | html %]'>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '14' %]
				<tr class='addon_info'>
					<td>CallBack number: </td>
					<td>
						<input size='20' type='text' name='CB_NUMBER' value='[% VBOX_PREF.CB_NUMBER | html %]'>
						 ( null == callerid )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Goto exten: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='CB_EXT' value='[% VBOX_PREF.CB_EXT | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'CB_EXT','[% VBOX_PREF.CB_EXT | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.CB_EXT | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Allow callback delay: </td>
					<td>
						<div class="onoffswitch">
						<input name="CB_USE_TIMEOFFSET" type="checkbox" class="onoffswitch-checkbox" id="CB_USE_TIMEOFFSET-ch" 
						[% IF VBOX_PREF.CB_USE_TIMEOFFSET %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="CB_USE_TIMEOFFSET-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Allow the selection of ext: </td>
					<td>
						<div class="onoffswitch">
						<input name="CB_DYNAMIC_EXT" type="checkbox" class="onoffswitch-checkbox" id="CB_DYNAMIC_EXT-ch" 
						[% IF VBOX_PREF.CB_DYNAMIC_EXT %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="CB_DYNAMIC_EXT-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '15' %]
				<tr class='addon_info'>
					<td>Time Zone</td>
					<td>
						<input size='20' type='text' name='TZ_NAME' value='[% VBOX_PREF.TZ_NAME | html %]'>
						<script lang='JavaScript'>tz_dropdown('[% VBOX_PREF.TZ_NAME %]', 'Default')</script>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Format: </td>
					<td>
						<select name="TIME_FORMAT">
							<option value="0" [% IF VBOX_PREF.TIME_FORMAT == '0' %] selected [% END %]>date and time</option>
							<option value="1" [% IF VBOX_PREF.TIME_FORMAT == '1' %] selected [% END %]>time</option>
							<option value="2" [% IF VBOX_PREF.TIME_FORMAT == '2' %] selected [% END %]>date</option>
						</select>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '16' %]
				<tr>
					<td>Fax Header: </td>
					<td>
						<textarea rows='[% VBOX_PREF.HEADERINFO | textarea_rows %]' cols='30' name='HEADERINFO'>[% VBOX_PREF.HEADERINFO | html %]</textarea>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Fax URL: </td>
					<td>
						<input size='30' type='text' name='FAX_URL' value='[% VBOX_PREF.FAX_URL | html %]'>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '17' %]
				<tr class='addon_info'>
					<td>Max message duaration: </td>
					<td>
						<input size='8' name="MAX_MSG_DURATION" value="[% VBOX_PREF.MAX_MSG_DURATION | html %]" type="text">
						( in sec, -1 - for unlimit  )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Min message duaration: </td>
					<td>
						<input size='8' name="MIN_MSG_DURATION" value="[% VBOX_PREF.MIN_MSG_DURATION | html %]" type="text">
						( in sec, -1 - for unlimit  )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Secret key ( for rec ): </td>
					<td>
						<input size='8' name="SECRET_KEY" value="[% VBOX_PREF.SECRET_KEY | html %]" type="text">
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Post interval ( sec ): </td>
					<td>
						<input size='8' name="MSG_LIMITS" value="[% VBOX_PREF.MSG_LIMITS | html %]" type="text">
						<select name='bbs_ttl' onchange='javascript:document.vb_opt.MSG_LIMITS.value=this.value'>
							<option selected value='-1'>unlimit</option>
							<option value='3600'>1 hour</option>
							<option value='86400'>1 day</option>
							<option value='604800'>7 days</option>
							<option value='2592000'>30 days</option>
						</select>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '18' %]
				<tr>
					<td>Activate CallBlast: </td>
					<td>
						<div class="onoffswitch">
						<input name="ACTIVE" type="checkbox" class="onoffswitch-checkbox" id="ACTIVE-ch" 
						[% IF VBOX_PREF.ACTIVE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="ACTIVE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Monitoring for greeting: </td>
					<td>
						<div class="onoffswitch">
						<input name="START_AFTER_CHANGE" type="checkbox" class="onoffswitch-checkbox" id="START_AFTER_CHANGE-ch" 
						[% IF VBOX_PREF.START_AFTER_CHANGE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="START_AFTER_CHANGE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Record answer: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_CALL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_CALL-ch" 
						[% IF VBOX_PREF.RECORD_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>DTMF logging:</td>
					<td>
						<select name="DTMF_LOG">
						[% IF VBOX_PREF.DTMF_LOG eq '2' %]
							<option value="2" selected>all</option>
							<option value="0">no</option>
							<option value="1">local</option>
						[% ELSIF VBOX_PREF.DTMF_LOG eq '1' %]
							<option value="1" selected>local</option>
							<option value="0">no</option>
							<option value="2">all</option>
						[% ELSE %]
							<option value="0" selected>no</option>
							<option value="1">local</option>
							<option value="2">all</option>
						[% END %]
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Wait notes:</td>
					<td>
						<div class="onoffswitch">
						<input name="WAIT_NOTES" type="checkbox" class="onoffswitch-checkbox" id="WAIT_NOTES-ch" 
						[% IF VBOX_PREF.WAIT_NOTES %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="WAIT_NOTES-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Start CallBlast at: </td>
					<td>
						<input name="START_TIMESTAMP" value="[% VBOX_PREF.START_TIMESTAMP | html %]" type="hidden">
						<script type="text/javascript">
							jQuery(document).ready(function() {
								jQuery("#START_DATE").dynDateTime({
									showsTime: true,
									ifFormat: "%Y/%m/%d %H:%M",
									align: "TL",
									electric: false,
									singleClick: false,
									button: ".next()"
								});
							});
						</script>
						<input size='16' name="START_DATE" value="[% BLAST_START_DATE | html %]" id='START_DATE' type="text">
						<a link="#"><span class='fs0'>▾</span></a>
					</td>
				</tr>
				<tr>
					<td>Stop CallBlast at: </td>
					<td>
						<input name="STOP_TIMESTAMP" value="[% VBOX_PREF.STOP_TIMESTAMP | html %]" type="hidden">
						<script type="text/javascript">
							jQuery(document).ready(function() {
								jQuery("#STOP_DATE").dynDateTime({
									showsTime: true,
									ifFormat: "%Y/%m/%d %H:%M",
									align: "TL",
									electric: false,
									singleClick: false,
									button: ".next()"
								});
							});
						</script>
						<input size='16' name="STOP_DATE" value="[% BLAST_STOP_DATE | html %]" id='STOP_DATE' type="text">
						<a link="#"><span class='fs0'>▾</span></a>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Ring timeout (sec): </td>
					<td>
						<input size='4' type='text' name='RING_TIMEOUT' value='[% VBOX_PREF.RING_TIMEOUT | html %]'>
						( 10 - 120 sec )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>RetryDial interval (minute): </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_INTERVAL' value='[% VBOX_PREF.RETRYDIAL_INTERVAL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Retry call attempts: </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_LOOPS' value='[% VBOX_PREF.RETRYDIAL_LOOPS | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Concurent calls: </td>
					<td>
						<input size='4' type='text' name='CALL_LIMIT' value='[% VBOX_PREF.CALL_LIMIT | html %]'>
						( 0 - unlimit )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Bind to queue:</a></td>
					<td nowrap="nowrap">
						<input size='12' type='text' name='DEPEND_QUEUE' value='[% VBOX_PREF.DEPEND_QUEUE | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'DEPEND_QUEUE','[% VBOX_PREF.DEPEND_QUEUE | html %]','<option value="">------------</option><option value="***">- raw editor -</option>',13)
						</script>
						 x
						<input size='5' type='text' name='DEPEND_QUEUE_CAPACITY' value='[% VBOX_PREF.DEPEND_QUEUE_CAPACITY | html %]'>
						<script language="JavaScript">
						exten_icon( '[% VBOX_PREF.DEPEND_QUEUE | html %]', '[% USER_CREDS.UNIQ | html %]', 'extension info' );
						</script>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Minimum duration of successful call: </td>
					<td>
						<input size='4' type='text' name='MIN_CALL_DURATION' value='[% VBOX_PREF.MIN_CALL_DURATION | html %]'>
						( 0 - unlimit [sec] )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Time Zone</td>
					<td>
						<input size='20' type='text' name='TZ_NAME' value='[% VBOX_PREF.TZ_NAME | html %]'>
						<script lang='JavaScript'>tz_dropdown('[% VBOX_PREF.TZ_NAME %]', 'Default')</script>
					</td>
				</tr>
				[% IF ALLOW_FA_DETECT %]
				<tr class='addon_info'>
					<td>Ignore answers fast than:</td>
					<td>
						<input size='5' type='text' name='FA_DETECT' value='[% VBOX_PREF.FA_DETECT | html %]'> sec
					</td>
				</tr>
				[% END %]
				<tr>
					<td>Check anwering machine:</td>
					<td>
						<select name="USE_AMD">
							<option value="0" 
							[% IF VBOX_PREF.USE_AMD eq '0' %]
								selected
							[% END %]
							>info inly</option>
							<option value="1" 
							[% IF VBOX_PREF.USE_AMD eq '1' %]
								selected
							[% END %]
							>extended</option>
							<option value="3" 
							[% IF VBOX_PREF.USE_AMD eq '3' %]
								selected
							[% END %]
							>strong</option>
							<option value="2" 
							[% IF VBOX_PREF.USE_AMD eq '2' %]
								selected
							[% END %]
							>not check</option>
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td><a href='#' class='info'>Answering machin detect opt:<span>
						Keep empty if not know what is.
						<br />
						[initialSilence][,greeting[,afterGreetingSilence[,totalAnalysis Time[,miniumWordLength[,betweenWordSilence[,maximumNumberOfWords[,silenceThreshold[,maximumWordLength]]]]]]]]

						<br />
initialSilence - 
    Is maximum initial silence duration before greeting.
    If this is exceeded, the result is detection as a MACHINE ( 4000 )
						<br />
greeting - 
    is the maximum length of a greeting.
    If this is exceeded, the result is detection as a MACHINE ( 2000 )
						<br />
afterGreetingSilence - 
    Is the silence after detecting a greeting.
    If this is exceeded, the result is detection as a HUMAN ( 500 )
						<br />
totalAnalysis Time - 
    Is the maximum time allowed for the algorithm
    to decide on whether the audio represents a HUMAN, or a MACHINE ( 7200 )
						<br />
miniumWordLength - 
    Is the minimum duration of Voice considered to be a word ( 100 )
						<br />
betweenWordSilence - 
    Is the minimum duration of silence after a word to consider the audio that
    follows to be a new word ( 50 )
						<br />
maximumNumberOfWords - 
    Is the maximum number of words in a greeting
    If this is REACHED, then the result is detection as a MACHINE ( 3 )
						<br />
silenceThreshold - 
    What is the average level of noise from 0 to 32767 which if not exceeded,
    should be considered silence? ( 256 )
						<br />
maximumWordLength - 
    Is the maximum duration of a word to accept.
    If exceeded, then the result is detection as a MACHINE ( 5000 )
						</span></a>
					</td>
					<td>
						<input size='30' type='text' name='AMD_OPT' value='[% VBOX_PREF.AMD_OPT | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Success call url:</td>
					<td>
						<input size='30' type='text' name='URL_SUCCESS' value='[% VBOX_PREF.URL_SUCCESS | html %]'>
					</td>
				</tr>
				[% IF ALLOW_STATE_UPDATE %]
				<tr class='addon_info'>
					<td><a href='#' class='info'>Callblast state url:<span>
							Callback that execute when blast status changed. 
							STATE variable ( active - have unprocessed items and and task not expired / inactive - all items processd ) can be used for this url.
							STATISTICS - callblast statistics. Send only in case of STATE == inactive.
						</span></a>
					</td>
					<td>
						<input size='30' type='text' name='URL_STATE' value='[% VBOX_PREF.URL_STATE | html %]'>
					</td>
				</tr>
				[% END %]
				<tr class='addon_info'>
					<td>Callback IVR:</a>
					</td>
					<td>
						<input size='30' type='text' name='CALLBACK_EXT' value='[% VBOX_PREF.CALLBACK_EXT | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'CALLBACK_EXT','[% VBOX_PREF.CALLBACK_EXT | html %]','<option value="">------------</option><option value="***">--- raw editor ---</option>')
						</script>
						<script language="JavaScript">
						exten_icon( '[% VBOX_PREF.CALLBACK_EXT | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Callback ttl:</a>
					</td>
					<td>
						<input size='5' type='text' name='CALLBACK_TTL' value='[% VBOX_PREF.CALLBACK_TTL | html %]'> ( minutes )
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '19' %]
				<tr>
					<td>Variable name: </td>
					<td>
						<input size='10' name="VAR_NAME" value="[% VBOX_PREF.VAR_NAME | html %]" type="text">
					</td>
				</tr>
				<tr>
					<td>Input pattern:</td>
					<td>
						<select name='DTMF_PATTERN_ID'>
							[% FOREACH dtmf = DTMF_PATTERN %]
								[% IF VBOX_PREF.DTMF_PATTERN_ID eq dtmf.ID %]
									<option value="[% dtmf.ID | html %]" selected>[% dtmf.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% dtmf.ID | html %]">[% dtmf.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Max digits: </td>
					<td>
						<input size='10' name="MAX_DIGITS" value="[% VBOX_PREF.MAX_DIGITS | html %]" type="text">
							( -1 for unlimit )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Format input var: </td>
					<td>
						<div class="onoffswitch">
						<input name="NEED_FORMATED" type="checkbox" class="onoffswitch-checkbox" id="NEED_FORMATED-ch" 
						[% IF VBOX_PREF.NEED_FORMATED %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="NEED_FORMATED-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '20' %]
				<tr>
					<td>URL: </td>
					<td>
						<input size='30' type='text' name='WEBVAR_URL' value='[% VBOX_PREF.WEBVAR_URL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Goto if request fail: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='GOTO_IF_FAIL' value='[% VBOX_PREF.GOTO_IF_FAIL | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'GOTO_IF_FAIL','[% VBOX_PREF.GOTO_IF_FAIL | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.GOTO_IF_FAIL | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Read user params: </td>
					<td>
						<div class="onoffswitch">
						<input name="NEED_PARAMS" type="checkbox" class="onoffswitch-checkbox" id="NEED_PARAMS-ch" 
						[% IF VBOX_PREF.NEED_PARAMS %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="NEED_PARAMS-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Record voice message: </td>
					<td>
						<div class="onoffswitch">
						<input name="NEED_VOICE" type="checkbox" class="onoffswitch-checkbox" id="NEED_VOICE-ch" 
						[% IF VBOX_PREF.NEED_VOICE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="NEED_VOICE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Max message duaration: </td>
					<td>
						<input size='8' name="MAX_MSG_DURATION" value="[% VBOX_PREF.MAX_MSG_DURATION | html %]" type="text">
						( in sec, -1 - for unlimit  )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Max silence: </td>
					<td>
						<input size='8' name="MAX_SILENCE" value="[% VBOX_PREF.MAX_SILENCE | html %]" type="text">
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Default var name: </td>
					<td>
						<input size='30' name="DEFAULT_VAR" value="[% VBOX_PREF.DEFAULT_VAR | html %]" type="text">
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '22' %]
				<tr>
					<td>Current value: </td>
					<td>
						<input size='30' type='text' name='VAR_VALUE' value='[% VBOX_PREF.VAR_VALUE | html %]'>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '23' %]
				<tr class='addon_info'>
					<td>CallBack number: </td>
					<td>
						<input size='20' type='text' name='AC_CB_NUMBER' value='[% VBOX_PREF.AC_CB_NUMBER | html %]'>
						 ( null == callerid )
					</td>
				</tr>
				<tr>
					<td>Remove message after dial: </td>
					<td>
						<div class="onoffswitch">
						<input name="AC_AUTO_REMOVE" type="checkbox" class="onoffswitch-checkbox" id="AC_AUTO_REMOVE-ch" 
						[% IF VBOX_PREF.AC_AUTO_REMOVE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="AC_AUTO_REMOVE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Ring timeout (sec): </td>
					<td>
						<input size='4' type='text' name='RING_TIMEOUT' value='[% VBOX_PREF.RING_TIMEOUT | html %]'>
						( 10 - 120 sec )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>RetryDial interval (sec): </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_INTERVAL' value='[% VBOX_PREF.RETRYDIAL_INTERVAL | html %]'>
						( 30 - 180 )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Call attempts: </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_LOOPS' value='[% VBOX_PREF.RETRYDIAL_LOOPS | html %]'>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '24' %]
				<tr>
					<td>Google user: </td>
					<td>
						<input size='20' type='text' name='GOOGLE_USER' value='[% VBOX_PREF.GOOGLE_USER | html %]'>
					</td>
				</tr>
				<tr>
					<td>Google password: </td>
					<td>
						<input size='20' type='password' name='GOOGLE_PSWD' value='[% VBOX_PREF.GOOGLE_PSWD | html %]'>
					</td>
				</tr>
				<tr>
					<td>Calendar name: </td>
					<td>
						<input size='20' type='text' name='GOOGLE_CALENDAR' value='[% VBOX_PREF.GOOGLE_CALENDAR | html %]'>
						( null == all calendars )
					</td>
				</tr>
				<tr>
					<td>Go to if not busy: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='GOTO_IF_OK' value='[% VBOX_PREF.GOTO_IF_OK | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'GOTO_IF_OK','[% VBOX_PREF.GOTO_IF_OK | html %]','<option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.GOTO_IF_OK | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				<tr>
					<td>Go to if busy: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='GOTO_IF_BUSY' value='[% VBOX_PREF.GOTO_IF_BUSY | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'GOTO_IF_BUSY','[% VBOX_PREF.GOTO_IF_BUSY | html %]','<option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.GOTO_IF_BUSY | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '25' %]
				<tr>
					<td>Text type:</td>
					<td>
						<select name='SAY_PATTERN_ID'>
							[% FOREACH say = SAY_PATTERN %]
								[% IF VBOX_PREF.SAY_PATTERN_ID eq say.ID %]
									<option value="[% say.ID | html %]" selected>[% say.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% say.ID | html %]">[% say.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				<tr>
					<td>Text string: </td>
					<td>
						<input size='20' name="TEXT_STR" value="[% VBOX_PREF.TEXT_STR | html %]" type="text">
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '26' %]
				<tr>
					<td>URL: </td>
					<td>
						<input size='30' type='text' name='STREAM_URL' value='[% VBOX_PREF.STREAM_URL | html %]'>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '27' %]
				<tr class='addon_info'>
					<td>Music on hold:</td>
					<td>
						<select name='MOH_ID'>
							[% FOREACH moh = MOH %]
								[% IF VBOX_PREF.MOH_ID eq moh.ID %]
									<option value="[% moh.ID | html %]" selected>[% moh.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% moh.ID | html %]">[% moh.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				<tr>
					<td>Max Hold Time (sec): </td>
					<td>
						<input size='30' type='text' name='RING_TIMEOUT' value='[% VBOX_PREF.RING_TIMEOUT | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
				<td>Goto if UNParking: </td>
					<td nowrap='nowrap'>
						<input size='15' type='text' name='GOTO_IF_FAIL' value='[% VBOX_PREF.GOTO_IF_FAIL | html %]'>
						<script language="JavaScript">
							exten_dropdown2( 'GOTO_IF_FAIL','[% VBOX_PREF.GOTO_IF_FAIL | html %]','<option value="">------------------------------</option><option value="***">--------- raw editor ---------</option>');
							exten_icon( '[% VBOX_PREF.GOTO_IF_FAIL | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
						</script>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '28' %]
				<tr>
					<td>Google user: </td>
					<td>
						<input size='20' type='text' name='GOOGLE_USER' value='[% VBOX_PREF.GOOGLE_USER | html %]'>
					</td>
				</tr>
				<tr>
					<td>Google password: </td>
					<td>
						<input size='20' type='password' name='GOOGLE_PSWD' value='[% VBOX_PREF.GOOGLE_PSWD | html %]'>
					</td>
				</tr>
				<tr>
					<td>Calendar name: </td>
					<td>
						<input size='20' type='text' name='GOOGLE_CALENDAR' value='[% VBOX_PREF.GOOGLE_CALENDAR | html %]'>
						( null == all calendars )
					</td>
				</tr>
				<tr>
					<td>Allow to confirm events: </td>
					<td>
						<div class="onoffswitch">
						<input name="ACCESS_MODE" type="checkbox" class="onoffswitch-checkbox" id="ACCESS_MODE-ch" 
						[% IF VBOX_PREF.ACCESS_MODE %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="ACCESS_MODE-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Offset Days:: </td>
					<td>
						<input size='3' type='text' name='GOOGLE_START_DAYS_OFFSET' value='[% VBOX_PREF.GOOGLE_START_DAYS_OFFSET | html %]'>
						( 0 - today, 1 - tomorrow, ..., etc )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>How many days: </td>
					<td>
						<input size='3' type='text' name='GOOGLE_STOP_DAYS_OFFSET' value='[% VBOX_PREF.GOOGLE_STOP_DAYS_OFFSET | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Maximum events: </td>
					<td>
						<input size='3' type='text' name='GOOGLE_MAX_EVENTS' value='[% VBOX_PREF.GOOGLE_MAX_EVENTS | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Announcement of the event started:</td>
					<td>
						<select name="TIME_FORMAT">
							<option value="0" [% IF VBOX_PREF.TIME_FORMAT == '0' %] selected [% END %]>date and time</option>
							<option value="1" [% IF VBOX_PREF.TIME_FORMAT == '1' %] selected [% END %]>time</option>
							<option value="2" [% IF VBOX_PREF.TIME_FORMAT == '2' %] selected [% END %]>date dd/mm/yy</option>
							<option value="3" [% IF VBOX_PREF.TIME_FORMAT == '3' %] selected [% END %]>date dd/mm</option>
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Filters:</td><td>&nbsp;</td>
				</tr>
				<tr class='addon_info'>
					<td>Author: </td>
					<td>
						<input size='20' type='text' name='GOOGLE_E_AUTHOR' value='[% VBOX_PREF.GOOGLE_E_AUTHOR | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Category: </td>
					<td>
						<input size='20' type='text' name='GOOGLE_E_CATEGORY' value='[% VBOX_PREF.GOOGLE_E_CATEGORY | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Substr: </td>
					<td>
						<input size='20' type='text' name='GOOGLE_E_Q' value='[% VBOX_PREF.GOOGLE_E_Q | html %]'>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '29' %]
				<tr>
					<td>Phones: </td>
					<td>
						<textarea rows='[% VBOX_PREF.CALL_NUMBER | textarea_rows %]' cols='30' name='CALL_NUMBER'>[% VBOX_PREF.CALL_NUMBER | html %]</textarea>
					</td>
				</tr>
				<tr>
					<td>Timeout (sec): </td>
					<td>
						<input size='10' type='text' name='TIME_LIMIT' value='[% VBOX_PREF.TIME_LIMIT | html %]'>
						( 0 - for unlimit )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Alert-Info header: </td>
					<td>
						<input size='30' type='text' name='ALERT_INFO' value='[% VBOX_PREF.ALERT_INFO | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Call-Info header: </td>
					<td>
						<input size='30' type='text' name='CALL_INFO' value='[% VBOX_PREF.CALL_INFO | html %]'>
					</td>
				</tr>
				<tr>
					<td>2-way Intercom: </td>
					<td>
						[% IF VBOX_PREF.PAGING  %]
							<input name="PAGING" type="radio" value="0">
						[% ELSE %]
							<input name="PAGING" type="radio" value="0" checked>
						[% END %]
					</td>
				</tr>
				<tr>
					<td>1-way Paging: </td>
					<td>
						[% IF VBOX_PREF.PAGING  %]
							<input name="PAGING" type="radio" value="1" checked>
						[% ELSE %]
							<input name="PAGING" type="radio" value="1">
						[% END %]
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Record call: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_CALL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_CALL-ch" 
						[% IF VBOX_PREF.RECORD_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send attachment: </td>
					<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keep message on the server: </td>
					<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Send new message notify: </td>
					<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '30' %]
				<tr>
					<td>Digits: </td>
					<td>
						<input size='30' type='text' name='DIGITS' value='[% VBOX_PREF.DIGITS | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Interdigit timeout (ms): </td>
					<td>
						<input size='10' type='text' name='TIMEOUT' value='[% VBOX_PREF.TIMEOUT | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Digit duration (ms): </td>
					<td>
						<input size='10' type='text' name='DURATION' value='[% VBOX_PREF.DURATION | html %]'>
					</td>
				</tr>
				[% END %]

				[% IF VBOX_PREF.TYPE eq '31' %]
				<tr class='addon_info'>
					<td>Ring timeout (sec): </td>
					<td>
						<input size='4' type='text' name='RING_TIMEOUT' value='[% VBOX_PREF.RING_TIMEOUT | html %]'>
						( 1 ring equals ~ 4 seconds )
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Music on hold:</td>
					<td>
						<select name='MOH_ID'>
							[% FOREACH moh = MOH %]
								[% IF VBOX_PREF.MOH_ID eq moh.ID %]
									<option value="[% moh.ID | html %]" selected>[% moh.DESCRIPTION | html %]</option>
								[% ELSE %]
									<option value="[% moh.ID | html %]">[% moh.DESCRIPTION | html %]</option>
								[% END %]
							[% END %]
						</select>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Confirm calls: </td>
					<td>
						<div class="onoffswitch">
						<input name="CONFIRM_CALL" type="checkbox" class="onoffswitch-checkbox" id="CONFIRM_CALL-ch" 
						[% IF VBOX_PREF.CONFIRM_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="CONFIRM_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Say calledid: </td>
					<td>
						<div class="onoffswitch">
						<input name="SAY_CALLEDID" type="checkbox" class="onoffswitch-checkbox" id="SAY_CALLEDID-ch" 
						[% IF VBOX_PREF.SAY_CALLEDID %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SAY_CALLEDID-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Wait call notes: </td>
					<td>
						<div class="onoffswitch">
						<input name="WAIT_NOTES" type="checkbox" class="onoffswitch-checkbox" id="WAIT_NOTES-ch" 
						[% IF VBOX_PREF.WAIT_NOTES %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="WAIT_NOTES-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Dynamic CallerID</td>
					<td>
						<div class="onoffswitch">
						<input name="DYNAMIC_CID" type="checkbox" class="onoffswitch-checkbox" id="DYNAMIC_CID-ch" 
						[% IF VBOX_PREF.DYNAMIC_CID %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="DYNAMIC_CID-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr>
					<td>Record calls: </td>
					<td>
						<div class="onoffswitch">
						<input name="RECORD_CALL" type="checkbox" class="onoffswitch-checkbox" id="RECORD_CALL-ch" 
						[% IF VBOX_PREF.RECORD_CALL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="RECORD_CALL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send attachment: </td>
					<td>
						<div class="onoffswitch">
						<input name="SEND_ATTACH" type="checkbox" class="onoffswitch-checkbox" id="SEND_ATTACH-ch" 
						[% IF VBOX_PREF.SEND_ATTACH %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SEND_ATTACH-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Keep message on the server: </td>
					<td>
						<div class="onoffswitch">
						<input name="KEEP_MSG" type="checkbox" class="onoffswitch-checkbox" id="KEEP_MSG-ch" 
						[% IF VBOX_PREF.KEEP_MSG %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="KEEP_MSG-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Send new message notify: </td>
					<td>
						<div class="onoffswitch">
						<input name="SENDNOTIFYEMAIL" type="checkbox" class="onoffswitch-checkbox" id="SENDNOTIFYEMAIL-ch" 
						[% IF VBOX_PREF.SENDNOTIFYEMAIL %]
							checked
						[% END %]
						>
						<label class="onoffswitch-label" for="SENDNOTIFYEMAIL-ch">
							<span class="onoffswitch-inner-int"></span>
							<span class="onoffswitch-switch"></span>
						</label></div>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>RetryDial interval (minutes): </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_INTERVAL' value='[% VBOX_PREF.RETRYDIAL_INTERVAL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>RetryDial loops: </td>
					<td>
						<input size='4' type='text' name='RETRYDIAL_LOOPS' value='[% VBOX_PREF.RETRYDIAL_LOOPS | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Calls per second:</td>
					<td>
						<input size='4' type='text' name='CPS' value='[% VBOX_PREF.CPS | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>Pre-call URL</td>
					<td>
						<input size='30' type='text' name='URL' value='[% VBOX_PREF.URL | html %]'>
					</td>
				</tr>
				<tr class='addon_info'>
					<td>After-call URL</td>
					<td>
						<input size='30' type='text' name='URL_STAT' value='[% VBOX_PREF.URL_STAT | html %]'>
					</td>
				</tr>
				[% END %]
				
				[% IF VBOX_PREF.TYPE eq '32' %]
				<!-- Pause -->
				<tr>
					<td>Wait during: </td>
					<td>
						<input size='3' type='text' name='TIMEOUT' value='[% VBOX_PREF.TIMEOUT | html %]'>
						sec
					</td>
				</tr>
				<tr class='addon_info'>
					<td nowrap='nowrap'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input size='3' type='text' name='DURATION' value='[% VBOX_PREF.DURATION | html %]'> sec</td>
					<td>
						<select name="MODE">
							<option value="0" [% IF VBOX_PREF.MODE == '0' %] selected [% END %]>nothing</option>
							<option value="1" [% IF VBOX_PREF.MODE == '1' %] selected [% END %]>silence</option>
							<option value="2" [% IF VBOX_PREF.MODE == '2' %] selected [% END %]>noise</option>
						</select>
					</td>
				</tr>
				[% END %]
				
				<tr><td colspan='2'>&nbsp;</td></tr>
				<tr>
					<td align='center'>
						<a id='xvb_view_mode_selector' href='#' onclick="return MoreExtOptions(this,0,'all options','core options')">&nbsp;</a>
					</td>
					<td colspan='2' align='center'>
						<input type='submit' value='Save changes'>
					</td>
				</tr>
				</form>
			</table>
			</td>

			<td width='1%'>&nbsp;</td>

			<td valign='top' width='46%' align='left'>
				<table  width='100%' id='d-tbl-s'>
					[% IF VBOX_PREF.TYPE eq '3' %]
					[% IF VB_DATA %]
					<tr>
						<td align='left'><h4>Call statistics ( started [% CALL_STAT_DATE | html %] ):</h4></td>
						<td align='right'>
							<a href='?action=callout_clean&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('def','Are you sure you want to reset statistics ?' )" title='reset call statistics'><span class='icon-loop2 fs0'></span></a>
						</td>
					</tr>
					<tr>
						<td colspan='2' align='center' width='100%'>
						<table width='100%' id='addon-data'>
							<tr>
								<th class='rad_l'>Phone number</th>
								<th>All calls</th>
								<th>Answered calls</th>
								<th>Duaration</th>
								<th>Duration AVG</th>
								<th class='rad_r'>RingTime AVG</th>
							</tr>
							[% FOREACH param = VB_DATA %]
							[% IF param.NUMBER eq '===' %]
							<tr align='center' class='resume'>
								<td></td>
							[% ELSE %]
							<tr align='center' class='nocolor'>
								<td align='left'>[% param.NUMBER | html %]</td>
							[% END %]
								<td>[% param.ALL | html %]</td>
								<td>[% param.ANSWERED | html %]</td>
								<td>[% param.DURATION | duration_str | html %]</td>
								<td>[% param.DURATION_AVG | duration_str | html %]</td>
								<td>[% param.RING_TIME_AVG | html %]</td>
							</tr>
							[% END %]
						</table>
						<script language='JavaScript'>listcolorer( 'addon-data' );</script>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					[% END %]

					[% IF VBOX_PREF.TYPE eq '7' %]
					[% IF USER_CREDS.ALLOW_ICECAST %]
					[% IF ICECAST_URL %]
					<tr>
						<td colspan='2' align='left'>
							<h4>HTTP-Broadcast:</h4>
							<ul>
								<li>URL: <a href='[% ICECAST_URL | html %]'>[% ICECAST_URL | html %]</a></li>
								<li>Expire date: [% ICECAST_EXPIRE_DATE | html %]</li>
							</ul>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					[% END %]
					[% END %]

					[% IF VBOX_PREF.TYPE eq '10' %]
					<tr>
						<td align='left'><h4>Voting results ( started [% VOTING_STAT_DATE | html %] ):</h4></td>
						<td align='right'>
							<a href='?action=voting_clean&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('def','Are you sure you want to reset statistics ?' )" title='reset voting results'><span class='icon-loop2 fs0'></span></a>
						</td>
					</tr>
					<tr>
						<td colspan='2'><pre>[% VBOX_PREF.GREETING | html %]</pre></td>
					</tr>
					<tr>
						<td colspan='2' align='center'>
						<table width='90%'  id='addon-data'>
							<tr>
								<th class='rad_l'>Variant</th>
								<th>Count</th>
								<th class='rad_r'>Percent</th>
							</tr>
							[% FOREACH param = VB_DATA %]
							[% IF param.DIGIT eq '===' %]
							<tr align='center' class='resume'>
								<td></td>
							[% ELSE %]
							<tr align='center' class='nocolor'>
								<td>[% param.DIGIT | html %]</td>
							[% END %]
								<td>[% param.COUNT | html %]</td>
								<td>[% param.PRC | html %] %</td>
							</tr>
							[% END %]
						</table>
						<script language='JavaScript'>listcolorer( 'addon-data' );</script>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					
					[% IF VBOX_PREF.TYPE eq '12' %]
					<tr>
						<td colspan='2' align='left'><h4>Exists podcasts:</h4></td>
					</tr>
					<tr>
						<td colspan='2' align='center'>
						<table width='100%'  id='addon-data'>
							<tr align='center'>
								<th class='rad_l'>Create date</th>
								<th>File size</th>
								<th>Duaration</th>
								<th colspan='2' class='rad_r'>&nbsp;</th>
							</tr>
							[% FOREACH param = VB_DATA %]
							<tr align='center' class='nocolor'>
								<td>[% param.CREATE_DATE | html %]</td>
								<td align='right'>[% param.FILE_SIZE | fsize %]</td>
								<td>[% param.DURATION | duration_str | html %]</td>
								<td>
									<a href='#' class='r-info'>
										<span class='icon-info fs0'></span>
										<span class='r-info'>
											[% param.TITLE | html %]<br/>
											Download time: [% param.DOWNLOAD_DATE | html %]
										</span>
									</a>
								</td>
								<td align='center'>
									<a title='download file' href='[% param.FILE_URL %]' onclick="return true"><span class='icon-download3 fs0'></span></a>
								</td>
							</tr>
							[% END %]
						</table>
						<script language='JavaScript'>listcolorer( 'addon-data' );</script>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					
					[% IF VBOX_PREF.TYPE eq '13' %]
					[% IF VB_DATA %]
					<tr>
						<td align='left'><h4>Agent statistics ( started [% CALL_STAT_DATE | html %] ):</h4></td>
						<td align='right'>
							<a href='?action=callout_clean&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('def','Are you sure you want to reset statistics ?' )" title='reset call statistics'><span class='icon-loop2 fs0'></span></a>
						</td>
					</tr>
					<tr>
						<td colspan='2' align='center' width='100%'>
						<table width='100%'  id='addon-data'>
							<tr>
								<th colspan='2' class='rad_l'><a class='warning-font' href='?action=agent_status&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.ACCESS_CODE %]' title='dynamic agents'>Phone number</a></th>
								<th>All calls</th>
								<th>Answered calls</th>
								<th>Duaration</th>
								<th>Duration AVG</th>
								<th class='rad_r'>RingTime AVG</th>
							</tr>
							[% FOREACH param = VB_DATA %]
							[% IF param.NUMBER eq '===' %]
							<tr align='center' class='resume'>
								<td></td>
								<td></td>
							[% ELSE %]
							<tr align='center' class='nocolor'>
								<td align='left'><span class='agent_state[% param.STATUS %]'>[% param.NUMBER | html %]</span></td>
								<td>
								[% IF param.STATUS eq '0' %]
									<a href='?action=agent_status&status=1&redir=1&pswd=[% param.PSWD | html %]&agent=[% param.NUMBER | html %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.ACCESS_CODE %]&rand=[% UNIXTIME %]-[% USER_CREDS.UNIQ %]' title='register agent'><span class='icon-loop2 fs1'></span></a>
								[% ELSIF param.STATUS eq '1'  %]
									<a href='?action=agent_status&status=0&redir=1&pswd=[% param.PSWD | html %]&agent=[% param.NUMBER | html %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.ACCESS_CODE %]&rand=[% UNIXTIME %]-[% USER_CREDS.UNIQ %]' title='unregister agent'><span class='icon-loop2 fs1'></span></a>
								[% END %]
								</td>
							[% END %]
								<td>[% param.ALL | html %]</td>
								<td>[% param.ANSWERED | html %]</td>
								<td>[% param.DURATION | duration_str | html %]</td>
								<td>[% param.DURATION_AVG | duration_str | html %]</td>
								<td>[% param.RING_TIME_AVG | html %]</td>
							</tr>
							[% END %]
						</table>
						<script language='JavaScript'>listcolorer( 'addon-data' );</script>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					[% END %]
					
					[% IF VBOX_PREF.TYPE eq '18' %]
					[% IF BLAST_STAT %]
					<tr>
						<td align='left' colspan='2'><h4>CallBlast statistics:</h4></td>
					</tr>
					<tr>
						<td align='right' colspan='2'>live calls: 
						<a href='?action=callblast_del_cache&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return confirm( 'Вы точно хотите сбросить статистику ?' )" title='обнулить статистику'>
						[% BLAST_CALLS | html %]
						</a>
						</td>
					</tr>
					<tr>
						<td colspan='2' align='center' width='100%'>
						<table width='100%'  id='addon-data'>
							<tr>
								<th class='rad_l'>Call Status</th>
								<th>Count</th>
								<th class='rad_r'>Percent</th>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Success</td>
								<td>[% BLAST_STAT.success | html %]&nbsp;</td>
								<td>[% BLAST_STAT.success_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Failed</td>
								<td>[% BLAST_STAT.failed | html %]&nbsp;</td>
								<td>[% BLAST_STAT.failed_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Wait redial</td>
								<td>[% BLAST_STAT.failedwait | html %]&nbsp;</td>
								<td>[% BLAST_STAT.failedwait_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Wait</td>
								<td>[% BLAST_STAT.wait | html %]&nbsp;</td>
								<td>[% BLAST_STAT.wait_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Expired</td>
								<td>[% BLAST_STAT.expired | html %]&nbsp;</td>
								<td>[% BLAST_STAT.expired_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='resume'>
								<td>All records</td>
								<td>[% BLAST_STAT.all | html %]&nbsp;</td>
								<td>100.00 %&nbsp;</td>
							</tr>
						</table>
						<script language='JavaScript'>listcolorer( 'addon-data' );</script>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					[% END %]
					
					[% IF VBOX_PREF.TYPE eq '27' %]
					[% IF VB_DATA scalar %]
					<tr>
						<td colspan='2' align='left'><h4>Parked calls:</h4></td>
					</tr>
					<tr>
						<td colspan='2' align='center' width='100%'>
						<table width='100%'  id='addon-data'>
							<tr>
								<th class='rad_l'>Phone number</th>
								<th>Parking slot</th>
								<th class='rad_r'>Hold time</th>
							</tr>
							[% FOREACH param = VB_DATA %]
							<tr align='center' class='nocolor'>
								<td align='left'>[% param.CALLER_ID | html %]</td>
								<td>[% param.SLOT | html %]</td>
								<td>[% param.HOLD_TIME | duration_str | html %]</td>
							</tr>
							[% END %]
						</table>
						<script language='JavaScript'>listcolorer( 'addon-data' );</script>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					[% END %]
					
					[% IF VBOX_PREF.TYPE eq '31' %]
					[% IF BLAST_STAT %]
					<tr>
						<td align='left'><h4>MultiDialout statistics:</h4></td>
					</tr>
					<tr>
						<td colspan='2' align='center' width='100%'>
						<table width='100%'  id='addon-data'>
							<tr>
								<th class='rad_l'>Call Status</th>
								<th>Count</th>
								<th class='rad_r'>Percent</th>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Success</td>
								<td>[% BLAST_STAT.success | html %]&nbsp;</td>
								<td>[% BLAST_STAT.success_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Failed</td>
								<td>[% BLAST_STAT.failed | html %]&nbsp;</td>
								<td>[% BLAST_STAT.failed_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Wait redial</td>
								<td>[% BLAST_STAT.failedwait | html %]&nbsp;</td>
								<td>[% BLAST_STAT.failedwait_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Wait</td>
								<td>[% BLAST_STAT.wait | html %]&nbsp;</td>
								<td>[% BLAST_STAT.wait_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='nocolor'>
								<td>Expired</td>
								<td>[% BLAST_STAT.expired | html %]&nbsp;</td>
								<td>[% BLAST_STAT.expired_prc | bill_float | html %] %&nbsp;</td>
							</tr>
							<tr align='right' class='resume'>
								<td>All records</td>
								<td>[% BLAST_STAT.all | html %]&nbsp;</td>
								<td>100.00 %&nbsp;</td>
							</tr>
						</table>
						<script language='JavaScript'>listcolorer( 'addon-data' );</script>
						</td>
					</tr>
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					[% END %]
					[% END %]
					
					<tr>
						<td colspan='2'><h4>System files:</h4></td>
					</tr>
					[% IF VBOX_PREF.NAME_FILE %]
					<tr class='nocolor' id='d-tr-s0'>
						<td>User Name: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.NAME_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.NAME_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.NAME_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s0','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]
					
					[% IF VBOX_PREF.GREET_FILE %]
					<tr class='nocolor' id='d-tr-s1'>
						<td>User Greeting: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.GREET_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.GREET_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.GREET_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s1','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]
					
					[% IF VBOX_PREF.TYPE eq '3' %]
					[% IF VBOX_PREF.ANNOUNCEMENT_FILE %]
					<tr class='nocolor' id='d-tr-s2'>
						<td>Announcement to callee: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.ANNOUNCEMENT_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s2','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]
					
					[% IF VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %]
					<tr class='nocolor' id='d-tr-s7'>
						<td>Announcement to caller: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s7','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]

					[% IF VBOX_PREF.RETRYDIAL_FILE %]
					<tr class='nocolor' id='d-tr-s3'>
						<td>RetryDial announcement: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.RETRYDIAL_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.RETRYDIAL_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.RETRYDIAL_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s3','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]
					[% END %]
					
					[% IF VBOX_PREF.TYPE eq '13' %]
					[% IF VBOX_PREF.ANNOUNCEMENT_FILE %]
					<tr class='nocolor' id='d-tr-s4'>
						<td>Announcement to callee: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.ANNOUNCEMENT_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s4','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]

					[% IF VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %]
					<tr class='nocolor' id='d-tr-s8'>
						<td>Announcement to caller: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.ANNOUNCEMENT_CALLER_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s8','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]

					[% IF VBOX_PREF.RETRYDIAL_FILE %]
					<tr class='nocolor' id='d-tr-s5'>
						<td>RetryDial announcement: </td>
						<td align='right' nowrap='nowrap'>
							<a title='play' 
								onclick="return ShowPlayer('[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.RETRYDIAL_FILE %]?media=mp3;type=listen' )"
								href="#"><span class='icon-volume-medium fs0'></span></a>
							&nbsp;<a title='download file' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.RETRYDIAL_FILE %].[% USER_CREDS.SOUND_FORMAT %]?media=[% USER_CREDS.SOUND_FORMAT %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.RETRYDIAL_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s5','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]
					[% END %]

					[% IF VBOX_PREF.TYPE eq '16' %]
					[% IF VBOX_PREF.FAX_FILE %]
					<tr class='nocolor' id='d-tr-s6'>
						<td>Fax on Demand: </td>
						<td align='right' nowrap='nowrap'>
							[% IF VB_DATA.C2C_SECRET %]
							<a title='SendFax' href='#' onclick="webfax_win('[% USER_CREDS.DOWNLOAD_IP %]','[% VB_DATA.C2C_SECRET %]','[% USER_CREDS.ACCESS_CODE %]','en','[% USER_CREDS.UNIQ %]'
							[% IF USER_CREDS.ROOT eq '0' %]
								'0'
							[% ELSE %]
								'[% VBOX_PREF.ID %]'
							[% END %]
							)"><span class='icon-phone fs0'></span></a>
							[% END %]
							<a title='download' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/msg_download/[% VBOX_PREF.ID %]/[% USER_CREDS.ACCESS_CODE %]/[% VBOX_PREF.FAX_FILE %]'><span class='icon-download3 fs0'></span></a>
							&nbsp;<a title='delete' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]?action=msg_delete&msg=[% VBOX_PREF.FAX_FILE %]&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-s6','d-tbl-s')"><span class='icon-bin fs0'></span></a>
						</td>
					</tr>
					[% END %]
					[% END %]
					
					<form enctype="multipart/form-data" method="post" id="sysmsg" action="[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]" onSubmit='return checkChanges(this)'>
					<tr>
						<td colspan='2' nowrap='nowrap'>
							<select name="type" id='sysmsgtype'>
								<option selected value="2">Greeting</option>
								<option value="1">Name</option>

								[% IF VBOX_PREF.TYPE eq '3' %]
								<option value="3">Announcement to callee</option>
								<option value="4">RetryDial</option>
								<option value="7">Announcement to caller</option>
								[% END %]

								[% IF VBOX_PREF.TYPE eq '13' %]
								<option value="3">Announcement to callee</option>
								<option value="4">RetryDial</option>
								<option value="7">Announcement to caller</option>
								[% END %]
								
								[% IF VBOX_PREF.TYPE eq '16' %]
								<option value="6">Fax on Demand</option>
								[% END %]
							</select> 
							<input type='file' name='msg'>
							<input type='hidden' name='id' id='sysmsgid' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='action' value='msg_upload'>
							<input type='hidden' name='uniq' id='sysmsguniq' value='[% USER_CREDS.UNIQ %]'>
							<input type='hidden' name='go' value='vb'>
						</td>
					<tr>
					<tr>
						<td align='right'>
							<input type='submit' value='Upload'>
						</td>
						</form>
						<td align='right'>
						<input type='submit' value='Record' onClick="ShowRecorder(); false">
						</td>
					</tr>
					
					<tr class='addon_info'>
						<td colspan='2'>&nbsp;</td>
					</tr>
					<tr class='addon_info'><td colspan='2'><h4>Backups:</h4></td></tr>
					<tr class='addon_info' id='backup-restore'>
						<td nowrap='nowrap'>
							[% IF USER_CREDS.ROOT eq '0' %]
							<form enctype="multipart/form-data" method="post" action="[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]" onSubmit='return checkChanges(this)'>
							<input type='file' name='config_file'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='action' value='ext_restore'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<input type='submit' value='Restore schema'>
							</form>
							[% END %]
						</td>
						<td align='center'>
							<a title='backup schema' href='[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]/ext_backup/[% VBOX_PREF.ID %]?uniq=[% USER_CREDS.UNIQ | html %]'><span class='icon-download3 fs0'></span></a>
						</td>
					</tr>

					[% IF VBOX_PREF.TYPE eq '4' %]
					<tr>
						<td colspan='2'>&nbsp;</td>
					</tr>
					<tr>
						<td align='left'><h4>Directory data ( [% MSG_FROM | html %] .. [% MSG_TO | html %] ):</h4></td>
					</tr>
					<tr>
						<td align='right' colspan='2'>
							<a title='get excel table' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=all&uniq=[% USER_CREDS.UNIQ %]&need_excel=1'"><span class='icon-file-excel fs0'></span></a>
							<a href='?action=dir_del&id=[% VBOX_PREF.ID %]&data_id=all&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('en')" title='delete ALL directory items'><span class='icon-bin-all fs2'></span></a>
						</td>
					</tr>
					<tr>
						<td colspan='2' align='center'>
						<table width='90%' id='d-tbl'>
							<tr>
								<th class='rad_l'>User Name</th>
								<th>Extension Number</th>
								<th class='rad_r'>&nbsp;</th>
							</tr>
							[% IF MSG_PREV ne '' %]
							<tr>
								<td align='left' colspan='3'>
									<a title='previous page' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=[% MSG_PREV %]&uniq=[% USER_CREDS.UNIQ %]'><span class='fs0'>◄</span></a>
								</td>
							</tr>
							[% END %]
							[% FOREACH param = VB_DATA %]
							<tr align='center' class='nocolor' id='d-tr-[% param.DATA_ID %]'>
								<form method="post" action="[% CGI_URL %]" id='f-[% param.DATA_ID %]' onSubmit='return xmlhttpPost(this,1)'>
								<input type='hidden' name='action' value='dir_update'>
								<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
								<input type='hidden' name='data_id' value='[% param.DATA_ID %]'>
								<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
								<td><input class='in_t0' type='text' name='name' value='[% param.NAME | html %]' size='20'></td>
								<td>
									<input class='in_t0' type='text' name='redir_to' value='[% param.REDIRECT_TO | html %]' size='15'>
									<script language="JavaScript">
										exten_icon( '[% param.REDIRECT_TO | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
									</script>
								</td>
								<td align='right' nowrap='nowrap'>
									<span class='in_t' id='in_t_id-[% param.DATA_ID %]'>
										<a href='#' onclick="return xmlhttpPost(document.getElementById('f-[% param.DATA_ID %]'),1);"><span class='icon-floppy-disk fs0 blink' title='save changes'></span></a>
										<noscript><input value='change' type='submit'></noscript>
									</span>
									<a href='?action=dir_del&id=[% VBOX_PREF.ID %]&data_id=[% param.DATA_ID | html %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-[% param.DATA_ID %]')" title='delete directory item'><span class='icon-bin fs0'></span></a>
								</td>
								</form>
							</tr>
							[% END %]
							[% IF MSG_NEXT ne '' %]
							<tr>
								<td align='right' colspan='3'>
									<a title='next page' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=[% MSG_NEXT %]&uniq=[% USER_CREDS.UNIQ %]'><span class='fs0'>►</span></a>
								</td>
							</tr>
							[% END %]
							<tr align='center'>
								<form method="post" action="[% CGI_URL %]" onSubmit='return checkChanges(this)'>
								<input type='hidden' name='action' value='dir_add'>
								<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
								<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
								<td><input type='text' name='name' value='' size='20'></td>
								<td><input type='text' name='redir_to' value='' size='15'></td>
								<td align='center'>
									<input type='submit' value='Add'>
								</td>
								</form>
							</tr>
							<tr><td colspan='3'>&nbsp;</td></tr>
							<tr id='csv-import'>
								<form enctype="multipart/form-data" method="post" action="[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]" onSubmit='return checkChanges(this)'>
								<td colspan='3' align='right'>
									<input type='file' name='config_file'>
									<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
									<input type='hidden' name='action' value='ext_restore'>
									<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
									<input type='hidden' name='is_excel' value='1'>
									<input type='submit' value='CSV import'>
								</td>
								</form>
							</tr>
						</table>
						</td>
					</tr>
					<script language='JavaScript'>listcolorer( 'd-tbl' );</script>
					[% END %]	
				</table>
			</td>
			</tr>
		
		</table>

		<table width='100%'>
			[% IF VBOX_PREF.TYPE eq '5' %]
			<tr><td colspan='3'>&nbsp;</td></tr>
			<tr>
				<td colspan='3' align='left'><h4>Schedule data:</h4></td>
			</tr>
			<tr>
				<td colspan='2' align='left'>
					<form enctype="multipart/form-data" method="post" action="[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]" onSubmit='return checkChanges(this)'>
					<input type='submit' value='CSV import'>
					<input type='file' name='config_file'>
					<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
					<input type='hidden' name='action' value='ext_restore'>
					<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
					<input type='hidden' name='is_excel' value='1'>
					</form>
				</td>
				<td align='right'>
					<a title='get excel table' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=all&uniq=[% USER_CREDS.UNIQ %]&need_excel=1'><span class='icon-file-excel fs0'></span></a>
					<a href='?action=schedule_del&id=[% VBOX_PREF.ID %]&data_id=all&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('en')" title='delete ALL schedule items'><span class='icon-bin-all fs2'></span></a>
				</td>
			</tr>
			<tr>
				<td colspan='3' align='center'>
					<table width='90%' id='d-tbl'>
						<tr>
							<th class='rad_l'>Priority</th>
							<th>Time</th>
							<th>Day Of Week</th>
							<th>Day Of Month</th>
							<th>Month</th>
							<th>Year</th>
							<th>Extra filters</th>
							<th>Extension Number</th>
							<th class='rad_r'>Actions</th>
						</tr>
						[% FOREACH param = VB_DATA %]
						<tr align='center' class='nocolor' id='d-tr-[% param.DATA_ID %]'>
							<form method="post" action="[% CGI_URL %]" id='f-[% param.DATA_ID %]' onSubmit='return xmlhttpPost(this,1)'>
							<input type='hidden' name='action' value='schedule_update'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='data_id' value='[% param.DATA_ID %]'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<td><input class='in_t0' size='5'  name='priority' type='text' value='[% param.PRIORITY | html %]'></td>
							<td><input class='in_t0' size='11' name='time_h'type='text' value='[% param.TIME_H | html %]'></td>
							<td><input class='in_t0' size='7'  name='dayofweek' type='text' value='[% param.DAYOFWEEK | html %]'></td>
							<td><input class='in_t0' size='7'  name='dayofmonth' type='text' value='[% param.DAYOFMONTH | html %]'></td>
							<td><input class='in_t0' size='5'  name='month' type='text' value='[% param.MONTH | html %]'></td>
							<td><input class='in_t0' size='9'  name='year' vtype='text' value='[% param.YEAR | html %]'></td>
							<td><input class='in_t0' size='20' name='callerid'  type='text' value='[% param.CALLERID | html %]'></td>
							<td>
								<input class='in_t0' size='11'  name='redirect_to' type='text' value='[% param.REDIRECT_TO | html %]'>
								<script language="JavaScript">
									exten_icon( '[% param.REDIRECT_TO | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
								</script>
							</td>
							<td align='left' nowrap='nowrap'>
								<a href='?action=schedule_del&id=[% VBOX_PREF.ID %]&data_id=[% param.DATA_ID | html %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-[% param.DATA_ID %]')" title='delete schedule item'><span class='icon-bin fs0'></span></a>
								<span class='in_t' id='in_t_id-[% param.DATA_ID %]'>
									<a href='#' onclick="return xmlhttpPost(document.getElementById('f-[% param.DATA_ID %]'),1);"><span class='icon-floppy-disk fs0 blink' title='save changes'></span></a>
									<noscript><input value='change' type='submit'></noscript>
								</span>
							</td>
							</form>
						</tr>
						[% END %]
						<tr align='center'>
							<form method="post" action="[% CGI_URL %]" onSubmit='return checkChanges(this)'>
							<input type='hidden' name='action' value='schedule_add'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<td><input size='5' type='text'  name='priority' value='5'></td>
							<td><input size='11' type='text' name='time_h' value='*'></td>
							<td><input size='7' type='text'  name='dayofweek' value='*'></td>
							<td><input size='7' type='text'  name='dayofmonth' value='*'></td>
							<td><input size='5' type='text'  name='month' value='*'></td>
							<td><input size='9' type='text'  name='year' value='*'></td>
							<td><input size='20' type='text' name='callerid' value='*'></td>
							<td><input size='11' type='text'  name='redirect_to' value='0'></td>
							<td align='center'>
								<input type='submit' value='Add'>
							</td>
							</form>
						</tr>
					</table>
					<script language='JavaScript'>listcolorer( 'd-tbl' );</script>
				</td>
			</tr>
			[% END %]

			[% IF VBOX_PREF.TYPE eq '18' %]
			<tr>
				<td colspan='2' align='left'><h4>CallBlast Schedule:</h4></td>
				<td align='right'>
					<a href='?action=schedule_del&id=[% VBOX_PREF.ID %]&data_id=all&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('en')" title='delete ALL schedule items'><span class='icon-bin-all fs2'></span></a>
				</td>
			</tr>
			<tr>
			<td colspan='3' align='center'>
				<table width='90%' id='d-tbl-d1'>
					<tr>
						<th class='rad_l'>Priority</th>
						<th>Time</th>
						<th>Day Of Week</th>
						<th>Day Of Month</th>
						<th>Month</th>
						<th>Year</th>
						<th>Mode</th>
						<th class='rad_r'>Actions</th>
					</tr>
					[% FOREACH param = BLAST_SCHEDULE %]
					<tr align='center' class='nocolor' id='d-tr-n-[% param.DATA_ID %]'>
						<form method="post" action="[% CGI_URL %]" id='f-n-[% param.DATA_ID %]' onSubmit='return xmlhttpPost(this,1)'>
						<input type='hidden' name='action' value='schedule_update'>
						<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
						<input type='hidden' name='data_id' value='[% param.DATA_ID %]'>
						<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
						<input type='hidden' name='img_id' value='in_t_id-n-[% param.DATA_ID %]'>
						<td><input class='in_t0' size='5' name='priority' type='text' value='[% param.PRIORITY | html %]'></td>
						<td><input class='in_t0' size='11' name='time_h'type='text' value='[% param.TIME_H | html %]'></td>
						<td><input class='in_t0' size='5' name='dayofweek' type='text' value='[% param.DAYOFWEEK | html %]'></td>
						<td><input class='in_t0' size='5' name='dayofmonth' type='text' value='[% param.DAYOFMONTH | html %]'></td>
						<td><input class='in_t0' size='5' name='month' type='text' value='[% param.MONTH | html %]'></td>
						<td><input class='in_t0' size='5' name='year' vtype='text' value='[% param.YEAR | html %]'></td>
						<td>
							<select class='in_t0' name="redirect_to">
								[% IF param.REDIRECT_TO eq '-block-' %]
								<option value="-block-" selected>disable</option>
								<option value="0">enable</option>
								[% ELSE %]
								<option value="0" selected>enable</option>
								<option value="-block-">disable</option>
								[% END %]
							</select> 
						</td>
						<td align='left' nowrap='nowrap'>
							<a href='?action=schedule_del&id=[% VBOX_PREF.ID %]&data_id=[% param.DATA_ID | html %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-n-[% param.DATA_ID %]','d-tbl-d1')" title='delete schedule item'><span class='icon-bin fs0'></span></a>
							<span class='in_t' id='in_t_id-n-[% param.DATA_ID %]'>
								<a href='#' onclick="return xmlhttpPost(document.getElementById('f-n-[% param.DATA_ID %]'),1);"><span class='icon-floppy-disk fs0 blink' title='save changes'></span></a>
								<noscript><input value='change' type='submit'></noscript>
							</span>
						</td>
						</form>
					</tr>
					[% END %]
						
					<tr align='center'>
						<form method="post" action="[% CGI_URL %]" onSubmit='return checkChanges(this)'>
						<input type='hidden' name='action' value='schedule_add'>
						<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
						<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
						<input type='hidden' name='callerid' value='*'>
						<td><input size='5' type='text' name='priority' value='5'></td>
						<td><input size='11' type='text' name='time_h' value='*'></td>
						<td><input size='5' type='text' name='dayofweek' value='*'></td>
						<td><input size='5' type='text' name='dayofmonth' value='*'></td>
						<td><input size='5' type='text' name='month' value='*'></td>
						<td><input size='5' type='text' name='year' value='*'></td>
						<td>
							<select name="redirect_to">
								<option value="0" selected>enable</option>
								<option value="-block-">disable</option>
							</select> 
						</td>
						<td align='center'>
							<input type='submit' value='Add'>
						</td>
						</form>
					</tr>
				</table>
				<script language='JavaScript'>listcolorer( 'd-tbl-d1' );</script>
			</td>
			</tr>
			<tr><td colspan='3'>&nbsp;</td></tr>
			
			<tr>
				<td colspan='2' align='left'><h4>CallBlast data ( [% MSG_FROM | html %] .. [% MSG_TO | html %] ) :</h4></td>
				<td align='right'>
					<a title='get excel table' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=all&uniq=[% USER_CREDS.UNIQ %]&need_excel=1'><span class='icon-file-excel fs0'></span></a>
					<a href='?action=callblast_del&id=[% VBOX_PREF.ID %]&data_id=all&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('en')" title='delete ALL callblast items'><span class='icon-bin-all fs2'></span></a>
				</td>
			</tr>
			<tr>
				<td colspan='3' align='center'>
				<table width='100%' id='d-tbl'>
					<tr>
						<th class='rad_l'>Handle time</th>
						<th>Phone Number(s)</th>
						<th>Name</th>
						<th>User vars</th>
						<th>Status</th>
						<th>Duration</th>
						<th>Attempt</th>
						<th>DTMF</th>
						<th>Notes</th>
						<th class='rad_r'>Actions</th>
					</tr>
					[% IF MSG_PREV ne '' %]
					<tr>
						<td align='left' colspan='10'>
							<a title='previous page' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=[% MSG_PREV %]&uniq=[% USER_CREDS.UNIQ %]'><span class='fs0'>◄</span></a>
						</td>
					</tr>
					[% END %]
					[% FOREACH param = VB_DATA %]
					<tr align='center' class='nocolor' id='d-tr-[% param.DATA_ID %]'>
						<form method="post" action="[% CGI_URL %]" id='f-[% param.DATA_ID %]' onSubmit='return xmlhttpPost(this,1)'>
						<input type='hidden' name='action' value='callblast_update'>
						<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
						<input type='hidden' name='data_id' value='[% param.DATA_ID %]'>
						<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
						<td>
							[% param.PROCESS_DATE | html %]
						</td>
						<td><input class='in_t0' size='33' type='text' name='pn' value='[% param.PHONE_NUMBER | html %]'></td>
						<td><input class='in_t0' size='20' type='text' name='name' value='[% param.NAME | html %]'></td>
						<td><input class='in_t0' size='25' type='text' name='uv' value='[% param.USER_VARS | html %]'></td>
						<td align='left'>
							[% IF param.CALL_STATUS contain 'success' %]
								<a class='success' href='?action=act_list&call_id=[% param.CALL_ID %]&uniq=[% USER_CREDS.UNIQ %]'>[% param.CALL_STATUS | html %]</a>
							[% ELSIF param.CALL_STATUS eq 'wait' %]
								wait	
							[% ELSIF param.CALL_STATUS %]
								<a class='warning-font' href='?action=act_list&call_id=[% param.CALL_ID %]&uniq=[% USER_CREDS.UNIQ %]'>[% param.CALL_STATUS | html %]</a>
							[% ELSE %]
								unknown
							[% END %]
						</td>
						<td>[% param.DURATION | duration_str | html %]</td>
						<td>[% param.ATTEMPT %]</td>
						<td>[% param.DTMF_LOG | html %]</td>
						<td>[% param.CALL_NOTE | html %]</td>
						<td align='left' nowrap='nowrap'>
							<a href='?action=callblast_del&id=[% VBOX_PREF.ID %]&data_id=[% param.DATA_ID | html %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-[% param.DATA_ID %]')" title='delete callblast item'><span class='icon-bin fs0'></span></a>
							<span class='in_t' id='in_t_id-[% param.DATA_ID %]'>
								<a href='#' onclick="return xmlhttpPost(document.getElementById('f-[% param.DATA_ID %]'),1);"><span class='icon-floppy-disk fs0 blink' title='save changes'></span></a>
								<noscript><input value='change' type='submit'></noscript>
							</span>
						</td>
						</form>
					</tr>
					[% END %]
					[% IF MSG_NEXT ne '' %]
					<tr>
						<td align='right' colspan='10'>
							<a title='next page' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=[% MSG_NEXT %]&uniq=[% USER_CREDS.UNIQ %]'><span class='fs0'>►</span></a>
						</td>
					</tr>
					[% END %]
					<tr id='csv-import'>
						<td colspan='4' align='left' nowrap='nowrap'>
							<form method="post" action="[% CGI_URL %]" onSubmit='return checkChanges(this)'>
							<input type='hidden' name='action' value='callblast_add'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<input size='33' type='text' name='pn' value='' placeholder='Phone number'>
							&nbsp;
							<input type='text' name='name' value='' size='20' placeholder='Name'>
							&nbsp;
							<input size='25' type='text' name='uv' value='' placeholder='Variables'>
							&nbsp;
							<input type='submit' value='Add'>
							</form>
						</td>
						<td colspan='4' align='right' nowrap='nowrap'>
							<form enctype="multipart/form-data" method="post" action="[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]" onSubmit='return checkChanges(this)'>
							<input type='file' name='config_file'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='action' value='ext_restore'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<input type='hidden' name='is_excel' value='1'>
							<input type='submit' value='CSV import'>
							</form>
						</td>
					</tr>
				</table>
				<script language='JavaScript'>listcolorer( 'd-tbl' );</script>
				</td>
			</tr>
			[% END %]

			[% IF VBOX_PREF.TYPE eq '21' %]
			<tr><td colspan='3'>&nbsp;</td></tr>
			<tr>
				<td colspan='3' align='left'><h4>Goto If data:</h4></td>
			</tr>
			<tr>
				<td colspan='2' align='left'>
					<form enctype="multipart/form-data" method="post" action="[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]" onSubmit='return checkChanges(this)'>
					<input type='submit' value='CSV import'>
					<input type='file' name='config_file'>
					<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
					<input type='hidden' name='action' value='ext_restore'>
					<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
					<input type='hidden' name='is_excel' value='1'>
					</form>
				</td>
				<td align='right'>
					<a title='Excel' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=all&uniq=[% USER_CREDS.UNIQ %]&need_excel=1'><span class='icon-file-excel fs0'></span></a>
					<a href='?action=gotoif_del&id=[% VBOX_PREF.ID %]&data_id=all&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('en')" title='delete ALL gotoif items'><span class='icon-bin-all fs2'></span></a>
				</td>
			</tr>

			<tr>
				<td colspan='3' align='center'>
					<table width='90%' id='d-tbl'>
						<tr>
							<th class='rad_l'>Priority</th>
							<th>Function</th>
							<th>Variable</th>
							<th>Condition</th>
							<th>Value</th>
							<th>Extension Number</th>
							<th class='rad_r'>Actions</th>
						</tr>
						[% FOREACH param = VB_DATA %]
						<tr align='center' class='nocolor' id='d-tr-[% param.DATA_ID %]'>
							<form method="post" action="[% CGI_URL %]" id='f-[% param.DATA_ID %]' onSubmit='return xmlhttpPost(this,1)'>
							<input type='hidden' name='action' value='gotoif_update'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='data_id' value='[% param.DATA_ID %]'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<td><input class='in_t0' size='5'  name='priority' type='text' value='[% param.PRIORITY | html %]'></td>
							<td>
								<select class='in_t0'  name="func">
									<option selected value="[% param.FUNC | html %]" selected>[% param.FUNC | html %]</option>
									<option value="value">value</option>
									<option value="strlen">strlen</option>
								</select> 
							</td>
							<td><input class='in_t0' size='15' name='var_name' type='text' value='[% param.VAR_NAME | html %]'></td>
							<td>
								<select class='in_t0' name="cond">
									<option selected value="[% param.COND | html %]" selected>[% param.COND | html %]</option>
									<option value="<">&lt;</option>
									<option value=">">&gt;</option>
									<option value="<=">&lt;=</option>
									<option value=">=">&gt;=</option>
									<option value="==">==</option>
									<option value="!=">!=</option>
									<option value="contain">contain</option>
									<option value="regexp">regexp</option>
								</select> 
							</td>
							<td><input class='in_t0' size='15' name='var_value' type='text' value='[% param.VAR_VALUE | html %]'></td>
							<td>
								<input class='in_t0' size='11'  name='redirect_to' type='text' value='[% param.REDIRECT_TO | html %]'>
								<script language="JavaScript">
									exten_icon( '[% param.REDIRECT_TO | html %]', '[% USER_CREDS.UNIQ | html %]', 'edit extension' );
								</script>
							</td>
							<td align='left' nowrap='nowrap'>
								<a href='?action=gotoif_del&id=[% VBOX_PREF.ID %]&data_id=[% param.DATA_ID | html %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-[% param.DATA_ID %]')" title='delete gotoif item'><span class='icon-bin fs0'></span></a>
								<span class='in_t' id='in_t_id-[% param.DATA_ID %]'>
									<a href='#' onclick="return xmlhttpPost(document.getElementById('f-[% param.DATA_ID %]'),1);"><span class='icon-floppy-disk fs0 blink' title='save changes'></span></a>
									<noscript><input value='change' type='submit'></noscript>
								</span>
							</td>
							</form>
						</tr>
						[% END %]
						<tr align='center'>
							<form method="post" action="[% CGI_URL %]" onSubmit='return checkChanges(this)'>
							<input type='hidden' name='action' value='gotoif_add'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<td><input size='5' type='text'  name='priority' value='5'></td>
							<td>
								<select name="func">
									<option selected value="value">value</option>
									<option value="strlen">strlen</option>
								</select> 
							</td>
							<td><input size='15' name='var_name' type='text'></td>
							<td>
								<select name="cond">
									<option value="==" selected>==</option>
									<option value="!=">!=</option>
									<option value="<">&lt;</option>
									<option value=">">&gt;</option>
									<option value="<=">&lt;=</option>
									<option value=">=">&gt;=</option>
									<option value="contain">contain</option>
									<option value="regexp">regexp</option>
								</select> 
							</td>
							<td><input size='15' name='var_value' type='text'></td>
							<td><input size='11' name='redirect_to' type='text'></td>
							<td align='center'>
								<input type='submit' value='Add'>
							</td>
							</form>
						</tr>
					</table>
					<script language='JavaScript'>listcolorer( 'd-tbl' );</script>
				</td>
			</tr>
			[% END %]

			[% IF VBOX_PREF.TYPE eq '31' %]
			<tr>
				<td colspan='2' align='left'><h4>MultiDailout data ( [% MSG_FROM | html %] .. [% MSG_TO | html %] ) :</h4></td>
				<td align='right'>
					<a href='?action=multidialout_reset&id=[% VBOX_PREF.ID %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('def','Do you really want to reset calls statistic ?')" title='Reset status to wait for ALL multidialout items'><span class='icon-loop2 fs0'></span></a>
					<a title='get excel table' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=all&uniq=[% USER_CREDS.UNIQ %]&need_excel=1'><span class='icon-file-excel fs0'></span></a>
					<a href='?action=multidialout_del&id=[% VBOX_PREF.ID %]&data_id=all&uniq=[% USER_CREDS.UNIQ %]' onclick="return DelConfirm('en')" title='delete ALL multidialout items'><span class='icon-bin-all fs2'></span></a>
				</td>
			</tr>
			<tr>
				<td colspan='3' align='center'>
				<table width='100%' id='d-tbl'>
					<tr>
						<th class='rad_l'>Handle time</th>
						<th>Phone Number(s)</th>
						<th>Name</th>
						<th>User vars</th>
						<th>Status</th>
						<th>Duration</th>
						<th>Attempt</th>
						<th>Notes</th>
						<th class='rad_r'>Actions</th>
					</tr>
					[% IF MSG_PREV ne '' %]
					<tr>
						<td align='left' colspan='9'>
							<a title='previous page' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=[% MSG_PREV %]&uniq=[% USER_CREDS.UNIQ %]'><span class='fs0'>◄</span></a>
						</td>
					</tr>
					[% END %]
					[% FOREACH param = VB_DATA %]
					<tr align='center' class='nocolor' id='d-tr-[% param.DATA_ID %]'>
						<form method="post" action="[% CGI_URL %]" id='f-[% param.DATA_ID %]' onSubmit='return xmlhttpPost(this,1)'>
						<input type='hidden' name='action' value='multidialout_update'>
						<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
						<input type='hidden' name='data_id' value='[% param.DATA_ID %]'>
						<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
						<td>
							[% param.PROCESS_DATE | html %]
						</td>
						<td><input class='in_t0' size='33' type='text' name='pn' value='[% param.PHONE_NUMBER | html %]'></td>
						<td><input class='in_t0' size='20' type='text' name='name' value='[% param.NAME | html %]'></td>
						<td><input class='in_t0' size='25' type='text' name='uv' value='[% param.USER_VARS | html %]'></td>
						<td align='left'>
							[% IF param.CALL_STATUS contain 'success' %]
								<a class='success' href='?action=act_list&call_id=[% param.CALL_ID %]&uniq=[% USER_CREDS.UNIQ %]'>[% param.CALL_STATUS | html %]</a>
							[% ELSIF param.CALL_STATUS eq 'wait' %]
								wait	
							[% ELSIF param.CALL_STATUS %]
								<a class='warning-font' href='?action=act_list&call_id=[% param.CALL_ID %]&uniq=[% USER_CREDS.UNIQ %]'>[% param.CALL_STATUS | html %]</a>
							[% ELSE %]
								unknown
							[% END %]
						</td>
						<td>[% param.DURATION | duration_str | html %]</td>
						<td>[% param.ATTEMPT %]</td>
						<td>[% param.CALL_NOTE %]</td>
						<td align='left' nowrap='nowrap'>
							<a href='?action=multidialout_del&id=[% VBOX_PREF.ID %]&data_id=[% param.DATA_ID | html %]&uniq=[% USER_CREDS.UNIQ %]' onclick="return xmlhttpDel(this,'en','d-tr-[% param.DATA_ID %]')" title='delete callblast item'><span class='icon-bin fs0'></span></a>
							<span class='in_t' id='in_t_id-[% param.DATA_ID %]'>
								<a href='#' onclick="return xmlhttpPost(document.getElementById('f-[% param.DATA_ID %]'),1);"><span class='icon-floppy-disk fs0 blink' title='save changes'></span></a>
								<noscript><input value='change' type='submit'></noscript>
							</span>
						</td>
						</form>
					</tr>
					[% END %]
					[% IF MSG_NEXT ne '' %]
					<tr>
						<td align='right' colspan='9'>
							<a title='next page' href='?action=vb_view&id=[% VBOX_PREF.ID %]&from=[% MSG_NEXT %]&uniq=[% USER_CREDS.UNIQ %]'><span class='fs0'>►</span></a>
						</td>
					</tr>
					[% END %]
					<tr id='csv-import'>
						<td align='left' nowrap='nowrap' colspan='5'>
							<form method="post" action="[% CGI_URL %]" onSubmit='return checkChanges(this)'>
							<input type='hidden' name='action' value='multidialout_add'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<input size='33' placeholder='Phone number' type='text' name='pn' value=''>
							&nbsp;
							<input size='20' placeholder='Name' type='text' name='name' value=''>
							&nbsp;
							<input size='25' placeholder='Variables' type='text' name='uv' value=''>
							&nbsp;
							<input type='submit' value='Add'>
							</form>
						</td>
						<td colspan='4' align='right'>
							<form enctype="multipart/form-data" method="post" action="[% USER_CREDS.DOWNLOAD_IP %][% CGI_URL %]" onSubmit='return checkChanges(this)'>
							<input type='file' name='config_file'>
							<input type='hidden' name='id' value='[% VBOX_PREF.ID %]'>
							<input type='hidden' name='action' value='ext_restore'>
							<input type='hidden' name='uniq' value='[% USER_CREDS.UNIQ %]'>
							<input type='hidden' name='is_excel' value='1'>
							<input type='submit' value='CSV import'>
							</form>
						</td>
					</tr>
				</table>
				<script language='JavaScript'>listcolorer( 'd-tbl' );</script>
				</td>
			</tr>
			[% END %]
		</table>
		<span><a name="addarea">&nbsp;</a></span>
	<div id='shadow'><div id='loading'></div></div><div id='center'></div>
	</center>
	<script language='JavaScript'>MoreExtOptions(document.getElementById('xvb_view_mode_selector'),1,'all options','core options');</script>
</body>
</html>
